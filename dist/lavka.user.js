// ==UserScript==
// @name         Lavka product cards filter
// @description  Hide product cards by filter
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_notification
// @match        https://lavka.yandex.ru/*
// @namespace    https://github.com/reliable-code/product-list-filters
// @version      0.6.73628133
// @icon         https://www.google.com/s2/favicons?sz=64&domain=yandex.ru
// @author       reliable-code
// ==/UserScript==

(()=>{(()=>{var Ze={7061:(d,N,_)=>{var E=_(8698).default;function A(){"use strict";d.exports=A=function(){return w},d.exports.__esModule=!0,d.exports.default=d.exports;var C,w={},ee=Object.prototype,L=ee.hasOwnProperty,G=Object.defineProperty||function(i,a,u){i[a]=u.value},te=typeof Symbol=="function"?Symbol:{},$=te.iterator||"@@iterator",R=te.asyncIterator||"@@asyncIterator",ne=te.toStringTag||"@@toStringTag";function h(i,a,u){return Object.defineProperty(i,a,{value:u,enumerable:!0,configurable:!0,writable:!0}),i[a]}try{h({},"")}catch{h=function(u,s,f){return u[s]=f}}function H(i,a,u,s){var f=a&&a.prototype instanceof B?a:B,c=Object.create(f.prototype),v=new W(s||[]);return G(c,"_invoke",{value:Oe(i,u,v)}),c}function re(i,a,u){try{return{type:"normal",arg:i.call(a,u)}}catch(s){return{type:"throw",arg:s}}}w.wrap=H;var ce="suspendedStart",Y="suspendedYield",fe="executing",X="completed",O={};function B(){}function z(){}function I(){}var ae={};h(ae,$,function(){return this});var ue=Object.getPrototypeOf,K=ue&&ue(ue(J([])));K&&K!==ee&&L.call(K,$)&&(ae=K);var F=I.prototype=B.prototype=Object.create(ae);function q(i){["next","throw","return"].forEach(function(a){h(i,a,function(u){return this._invoke(a,u)})})}function Q(i,a){function u(f,c,v,y){var b=re(i[f],i,c);if(b.type!=="throw"){var k=b.arg,T=k.value;return T&&E(T)=="object"&&L.call(T,"__await")?a.resolve(T.__await).then(function(x){u("next",x,v,y)},function(x){u("throw",x,v,y)}):a.resolve(T).then(function(x){k.value=x,v(k)},function(x){return u("throw",x,v,y)})}y(b.arg)}var s;G(this,"_invoke",{value:function(c,v){function y(){return new a(function(b,k){u(c,v,b,k)})}return s=s?s.then(y,y):y()}})}function Oe(i,a,u){var s=ce;return function(f,c){if(s===fe)throw Error("Generator is already running");if(s===X){if(f==="throw")throw c;return{value:C,done:!0}}for(u.method=f,u.arg=c;;){var v=u.delegate;if(v){var y=ge(v,u);if(y){if(y===O)continue;return y}}if(u.method==="next")u.sent=u._sent=u.arg;else if(u.method==="throw"){if(s===ce)throw s=X,u.arg;u.dispatchException(u.arg)}else u.method==="return"&&u.abrupt("return",u.arg);s=fe;var b=re(i,a,u);if(b.type==="normal"){if(s=u.done?X:Y,b.arg===O)continue;return{value:b.arg,done:u.done}}b.type==="throw"&&(s=X,u.method="throw",u.arg=b.arg)}}}function ge(i,a){var u=a.method,s=i.iterator[u];if(s===C)return a.delegate=null,u==="throw"&&i.iterator.return&&(a.method="return",a.arg=C,ge(i,a),a.method==="throw")||u!=="return"&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+u+"' method")),O;var f=re(s,i.iterator,a.arg);if(f.type==="throw")return a.method="throw",a.arg=f.arg,a.delegate=null,O;var c=f.arg;return c?c.done?(a[i.resultName]=c.value,a.next=i.nextLoc,a.method!=="return"&&(a.method="next",a.arg=C),a.delegate=null,O):c:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,O)}function V(i){var a={tryLoc:i[0]};1 in i&&(a.catchLoc=i[1]),2 in i&&(a.finallyLoc=i[2],a.afterLoc=i[3]),this.tryEntries.push(a)}function P(i){var a=i.completion||{};a.type="normal",delete a.arg,i.completion=a}function W(i){this.tryEntries=[{tryLoc:"root"}],i.forEach(V,this),this.reset(!0)}function J(i){if(i||i===""){var a=i[$];if(a)return a.call(i);if(typeof i.next=="function")return i;if(!isNaN(i.length)){var u=-1,s=function f(){for(;++u<i.length;)if(L.call(i,u))return f.value=i[u],f.done=!1,f;return f.value=C,f.done=!0,f};return s.next=s}}throw new TypeError(E(i)+" is not iterable")}return z.prototype=I,G(F,"constructor",{value:I,configurable:!0}),G(I,"constructor",{value:z,configurable:!0}),z.displayName=h(I,ne,"GeneratorFunction"),w.isGeneratorFunction=function(i){var a=typeof i=="function"&&i.constructor;return!!a&&(a===z||(a.displayName||a.name)==="GeneratorFunction")},w.mark=function(i){return Object.setPrototypeOf?Object.setPrototypeOf(i,I):(i.__proto__=I,h(i,ne,"GeneratorFunction")),i.prototype=Object.create(F),i},w.awrap=function(i){return{__await:i}},q(Q.prototype),h(Q.prototype,R,function(){return this}),w.AsyncIterator=Q,w.async=function(i,a,u,s,f){f===void 0&&(f=Promise);var c=new Q(H(i,a,u,s),f);return w.isGeneratorFunction(a)?c:c.next().then(function(v){return v.done?v.value:c.next()})},q(F),h(F,ne,"Generator"),h(F,$,function(){return this}),h(F,"toString",function(){return"[object Generator]"}),w.keys=function(i){var a=Object(i),u=[];for(var s in a)u.push(s);return u.reverse(),function f(){for(;u.length;){var c=u.pop();if(c in a)return f.value=c,f.done=!1,f}return f.done=!0,f}},w.values=J,W.prototype={constructor:W,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=C,this.done=!1,this.delegate=null,this.method="next",this.arg=C,this.tryEntries.forEach(P),!a)for(var u in this)u.charAt(0)==="t"&&L.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=C)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var u=this;function s(k,T){return v.type="throw",v.arg=a,u.next=k,T&&(u.method="next",u.arg=C),!!T}for(var f=this.tryEntries.length-1;f>=0;--f){var c=this.tryEntries[f],v=c.completion;if(c.tryLoc==="root")return s("end");if(c.tryLoc<=this.prev){var y=L.call(c,"catchLoc"),b=L.call(c,"finallyLoc");if(y&&b){if(this.prev<c.catchLoc)return s(c.catchLoc,!0);if(this.prev<c.finallyLoc)return s(c.finallyLoc)}else if(y){if(this.prev<c.catchLoc)return s(c.catchLoc,!0)}else{if(!b)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return s(c.finallyLoc)}}}},abrupt:function(a,u){for(var s=this.tryEntries.length-1;s>=0;--s){var f=this.tryEntries[s];if(f.tryLoc<=this.prev&&L.call(f,"finallyLoc")&&this.prev<f.finallyLoc){var c=f;break}}c&&(a==="break"||a==="continue")&&c.tryLoc<=u&&u<=c.finallyLoc&&(c=null);var v=c?c.completion:{};return v.type=a,v.arg=u,c?(this.method="next",this.next=c.finallyLoc,O):this.complete(v)},complete:function(a,u){if(a.type==="throw")throw a.arg;return a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):a.type==="normal"&&u&&(this.next=u),O},finish:function(a){for(var u=this.tryEntries.length-1;u>=0;--u){var s=this.tryEntries[u];if(s.finallyLoc===a)return this.complete(s.completion,s.afterLoc),P(s),O}},catch:function(a){for(var u=this.tryEntries.length-1;u>=0;--u){var s=this.tryEntries[u];if(s.tryLoc===a){var f=s.completion;if(f.type==="throw"){var c=f.arg;P(s)}return c}}throw Error("illegal catch attempt")},delegateYield:function(a,u,s){return this.delegate={iterator:J(a),resultName:u,nextLoc:s},this.method==="next"&&(this.arg=C),O}},w}d.exports=A,d.exports.__esModule=!0,d.exports.default=d.exports},8698:d=>{function N(_){"@babel/helpers - typeof";return d.exports=N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},d.exports.__esModule=!0,d.exports.default=d.exports,N(_)}d.exports=N,d.exports.__esModule=!0,d.exports.default=d.exports},4687:(d,N,_)=>{var E=_(7061)();d.exports=E;try{regeneratorRuntime=E}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=E:Function("r","regeneratorRuntime = r")(E)}}},Ce={};function _e(d){var N=Ce[d];if(N!==void 0)return N.exports;var _=Ce[d]={exports:{}};return Ze[d](_,_.exports,_e),_.exports}var Rt={};(()=>{"use strict";var d=_e(4687);function N(e,t){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime.mark(function e(t,n){var r,o,l=arguments;return _regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(r=l.length>2&&l[2]!==void 0?l[2]:null,o=t.querySelector(n),!o){m.next=4;break}return m.abrupt("return",Promise.resolve(o));case 4:return m.abrupt("return",new Promise(function(S){var Z=new MutationObserver(Lt);Z.observe(t,{childList:!0,subtree:!0});var Ee=null;r&&(Ee=setTimeout(function(){Z.disconnect(),console.log("No element found for selector: ".concat(n)),S(null)},r));function Lt(){var Je=t.querySelector(n);Je&&(Ee&&clearTimeout(Ee),Z.disconnect(),S(Je))}}));case 5:case"end":return m.stop()}},e)})),_.apply(this,arguments)}function E(e,t){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime.mark(function e(t,n){var r;return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(r=t.querySelector(n),r){l.next=3;break}return l.abrupt("return",Promise.resolve());case 3:return l.abrupt("return",new Promise(function(g){var m=new MutationObserver(S);m.observe(t,{childList:!0,subtree:!0});function S(){t.querySelector(n)||(m.disconnect(),g())}}));case 4:case"end":return l.stop()}},e)})),A.apply(this,arguments)}function C(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,n;return function(){for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];clearTimeout(n),n=setTimeout(function(){return e.apply(void 0,o)},t)}}function w(e,t){var n=new IntersectionObserver(function(r){r.forEach(function(o){o.isIntersecting&&(t(),ee(e))})});e.intersectionObserver=n,n.observe(e)}function ee(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function L(e){return e.replace(/\D/g,"")}function G(e){return e.replace(/[^\d.,-]/g,"")}function te(e){return e.replace(/\s/g,"")}function $(e){return e.charAt(0).toUpperCase()+e.slice(1)}function R(e){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(e)}function ne(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return!!t.querySelector(e)}function h(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=t.querySelector(e);return n&&!r&&console.log("No element found for selector: ".concat(e)),r}function H(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=t.querySelectorAll(e);return n&&!r.length&&console.log("No elements found for selector: ".concat(e)),r}function re(e,t,n){return _toConsumableArray(e.querySelectorAll(t)).find(function(r){return r.textContent.trim().includes(n)})}function ce(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=h(t,e,!0),l=Y(o,n,r);return l}function Y(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!e)return r===null?(console.log("No element found"),null):r;var o=e.innerText;return O(o,t,n)}function fe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e[t],o=Y(r,n);return o}function X(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.textContent;return O(r,t,n)}function O(e,t,n){t&&(e=G(e)),n&&(e=e.replace(",","."));var r=+e;return r}function B(e,t){Object.assign(e.style,t)}function z(e){return Object.entries(e).map(function(t){var n=_slicedToArray(t,2),r=n[0],o=n[1];return"".concat(r.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o,";")}).join(" ")}function I(e){return e?e.split(";").filter(function(t){return t.trim()!==""}).reduce(function(t,n){var r=n.split(":").map(function(S){return S.trim()}),o=_slicedToArray(r,2),l=o[0],g=o[1],m=l.replace(/-([a-z])/g,function(S,Z){return Z.toUpperCase()});return t[m]=g,t},{}):{}}function ae(e){var t=function(r){return r.nodeType===Node.TEXT_NODE&&r.textContent.trim()!==""?[r]:_toConsumableArray(r.childNodes).flatMap(t)};return t(e)}function ue(e,t,n){var r=q(e,"text",t);return r.value=n,r}function K(e,t,n,r,o,l){var g=q(e,"number",t);return g.value=n,g.step=r,g.min=o,g.max=l,g}function F(e,t,n){var r=q(e,"checkbox",t);return r.checked=n,r}function q(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=P("input",e);return t&&(r.type=t),n&&(r.addEventListener("keyup",C(n,200)),r.addEventListener("change",C(n,100))),r}function Q(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return P("span",e,t)}function Oe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=P("a",e,t);return n&&(r.href=n),r}function ge(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=P("button",e,t);return n&&(r.onclick=n),r}function V(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return P("div",e,t)}function P(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(R(t)!=="object"||t===null)throw new TypeError("styles should be an object");var r=document.createElement(e);return B(r,t),n&&(r.innerHTML=n),r}function W(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"customFiltersContainer",o=h("#".concat(r),e);if(o)if(n)o.remove();else return;o=V(),o.id=r,t(o,e)}function J(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"common",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=window.location.pathname;return i(r,e,t,n)}function i(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=e.split("/"),l=o[t]||n;return r&&console.log("Pathname element: ".concat(l)),l}function a(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"common",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=J(e,"",n);return u(r,t,n)}function u(e,t,n){if(!e)return t;var r=e.split("-").at(-1);return n&&console.log("Pathname element ending: ".concat(r)),r}function s(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"common",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=i(e,t,"",r);return u(o,n,r)}function f(e){var t=window.location.search;return c(t,e)}function c(e,t){var n=new URLSearchParams(e);return n.get(t)}function v(e){return window.location.pathname.includes(e)}function y(e){return e.some(function(t){return v(t)})}function b(e){var t=window.location.pathname.split("/");return t.some(function(n){return n===e})}function k(e,t){return!T(e,t)}function T(e,t){if(!t.value)return!0;var n=e.toLowerCase(),r=getSearchStrings(t),o=[],l=[];return r.forEach(function(g){if(g.startsWith("!")){var m=g.substring(1);m&&l.push(m)}else o.push(g)}),o.every(function(g){return n.includes(g)})&&l.every(function(g){return!n.includes(g)})}function x(e,t){return t.value!=null&&e<t.value}function et(e,t){return t.value!=null&&e>t.value}function Pt(e,t){return t.value!=null&&e!==t.value}function It(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=createDiv(n,e),l=createTextInput(r,t.updateValueFromEvent,t.value);return o.append(l),o}function oe(e,t,n,r,o){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},g=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},m=V(l,e),S=K(g,t.updateValueFromEvent,t.value,n,r,o);return m.append(S),m}function we(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=V(n,e),l=F(r,t.updateValueFromEvent,t.value);return o.append(l),o}function Se(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function Te(e){Ne(e),xe(e,"none")}function tt(e){e.intersectionObserver||runOnceOnIntersection(e,function(){return Te(e)})}function me(e){var t=rt(e);xe(e,t)}function nt(e,t){t?Te(e):me(e)}function Ft(e,t){t?tt(e):(clearIntersectionObserver(e),me(e))}function xe(e,t){e.style.display=t}function rt(e){return Ne(e),e.defaultDisplay}function Ne(e){if(!e.defaultDisplay){var t=getComputedStyle(e),n=t.display;e.defaultDisplay=n}}function kt(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.3;t?ut(e,n):at(e)}function at(e){e.style.opacity=""}function ut(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.3;e.style.opacity=t}function Dt(e){e.style.order=""}function Mt(e,t){e.style.order=t}function jt(e,t){e.style.background=t}function At(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"custom-global-style",n=document.getElementById(t);n||(n=document.createElement("style"),n.id=t,n.type="text/css",document.head.appendChild(n)),n.textContent=e}function Bt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return createTextFilterControl("\u041F\u043E\u0438\u0441\u043A: ",e,t,n)}function Vt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:3;return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",e,r,o,5,t,n)}function Ut(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:3;return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",e,r,o,5,t,n)}function Gt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Le("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",e,t,n)}function Ht(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Le("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",e,t,n)}function Le(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return createNumberFilterControl(e,t,"1","1","999999",n,r)}function ot(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return it("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",e,t,n)}function it(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return oe(e,t,"5","0","100",n,r)}function Kt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",e,"5","0","100",t,n)}function Re(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"250";return oe(e,t,o,"0","1000000",n,r)}function lt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"25";return Re("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",e,t,n,r)}function st(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"25";return Re("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",e,t,n,r)}function qt(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return createNumberFilterControl(e,t,"1","0","99999",n,r)}function Wt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",e,t,n)}function $t(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",e,t,n)}function Pe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return we("\u0412\u043A\u043B: ",e,t,n)}var D={MAIN_CONTENT:"#main-content-id",SECTION_HEADER:"h2",OBSERVED_SECTION_SELECTOR:'[data-id="promo-expiring-products"]',PRODUCT_CARD_LINK:'[data-type="product-card-link"]',PRODUCT_CARD_PRICE_WRAP:'span [aria-hidden="true"]',PROMO_LABEL:"li"};function ct(e,t){if(R(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(R(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ie(e){var t=ct(e,"string");return R(t)=="symbol"?t:t+""}function de(e,t,n){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fe(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ke={INPUT:{marginLeft:"5px",border:"2px solid #b3bcc5",borderRadius:"6px",padding:"6px 10px"}},p={CONTAINER:{display:"flex",marginTop:"14px",gridGap:"15px"},CONTROL:{display:"flex",alignItems:"center"},NUMBER_INPUT:ie(ie({},ke.INPUT),{},{width:"90px"}),CHECKBOX_INPUT:{marginLeft:"5px",width:"25px",height:"25px"},RELOAD_TIMER_CONTROL:ie(ie({},ke.CONTROL),{},{marginLeft:"auto",width:"170px"})};function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ie(r.key),r)}}function je(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e,t){if(t&&(R(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ft(e)}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},le(e)}function ve(e,t){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ve(e,t)}function mt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}var dt=je(function e(t,n){var r=this;De(this,e),de(this,"onChangeIfDefined",function(){r.onChange&&r.onChange()}),this.value=t,this.onChange=n});function vt(e){var t=e.target,n=t.type;switch(n){case"text":return'"'.concat(t.value,'"');case"number":return t.value;case"checkbox":return t.checked;default:return console.log("Unknown input type: ".concat(n)),null}}function pt(e){return e===""?null:JSON.parse(e)}function ht(e,t,n){return t=le(t),gt(e,Ae()?Reflect.construct(t,n||[],le(e).constructor):t.apply(e,n))}function Ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ae=function(){return!!e})()}var yt=window.GM_setValue,Yt=window.GM.setValue,bt=window.GM_getValue,Xt=window.GM_addValueChangeListener,Be=function(e){function t(n){var r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return De(this,t),r=ht(this,t,[bt(n,o),l]),de(r,"updateValueFromEvent",function(g){var m=vt(g),S=pt(m);r.updateValue(S)}),r.storageKey=n,r.defaultValue=o,r}return mt(t,e),je(t,[{key:"updateValue",value:function(r){this.value!==r&&(yt(this.storageKey,r),this.value=r,this.onChangeIfDefined())}},{key:"clearValue",value:function(){this.updateValue(null)}},{key:"resetValue",value:function(){this.updateValue(this.defaultValue)}}],[{key:"create",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return new t(r,o,l)}},{key:"createWithCompositeKey",value:function(r,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,m="".concat(r,"-").concat(o);return new t(m,l,g)}}])}(dt);function Et(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return{createGlobalFilter:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;return Be.create(r,o,l)},createSectionFilter:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;if(!t)throw new Error("sectionId must be provided to use createSectionFilter.");return Be.createWithCompositeKey(t,r,o,l)}}}function Ve(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return V(e,"|")}function Ct(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:75,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"customFiltersContainer",r=document.getElementById(n);if(!r)return console.log('Element with id="'.concat(n,'" not found.')),null;var o=createButton(e,"".concat(arrowUpIcon,"\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C"));return o.addEventListener("mouseover",function(){o.style.filter="brightness(0.9)"}),o.addEventListener("mouseout",function(){o.style.filter="brightness(1)"}),o.addEventListener("click",function(){var l=r.getBoundingClientRect();window.scrollTo({top:l.top+window.scrollY-t})}),new IntersectionObserver(function(l){var g=_slicedToArray(l,1),m=g[0];o.style.display=m.isIntersecting?"none":"flex"},{threshold:.5}).observe(r),o}function zt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Ct(t);n&&e.appendChild(n)}var _t=Et(Qe),M=_t.createGlobalFilter,Ue=M("min-discount-filter"),Ge=M("min-price-filter"),He=M("max-price-filter"),Ke=M("filter-enabled",!0),pe=M("observer-reload-interval",3.5,be),qe=M("min-observer-section-length",10),We=M("show-observer-notification",!0),he=M("observer-enabled",!0,be),j,$e=!0,ye,U=null,se;(function(){var t=new MutationObserver(C(Ot,750));t.observe(document.head,{childList:!0})})();function Ot(){if(j=h(D.MAIN_CONTENT),!!j&&v("category")){ze();var e=new MutationObserver(C(ze,100));e.observe(j,{childList:!0,subtree:!0})}}function Ye(e,t){var n=t?`
(`.concat(t," \u0442\u043E\u0432\u0430\u0440\u043E\u0432)"):"";window.GM_notification({text:'\u041F\u043E\u044F\u0432\u0438\u043B\u0441\u044F \u0440\u0430\u0437\u0434\u0435\u043B "'.concat(e,'"').concat(n),tag:"section-appear",highlight:!0,silent:!0})}function Qt(e){var t=getAllElements(SELECTORS.SECTION_HEADER,j),n=_toConsumableArray(t).some(function(r){return r.innerText.includes(e)});n&&Ye(e)}function wt(e,t){var n=h(e);if(n){var r=H(D.PRODUCT_CARD_LINK,n).length,o=h(D.SECTION_HEADER,n);o.innerText+=" (".concat(r,")"),he.value&&We.value&&r>=qe.value&&Ye(t,r)}}function be(){U&&(U=null),ye&&clearInterval(ye),se.textContent=null,!(!he.value||!pe.value)&&(U=pe.value*60,Xe(),ye=setInterval(Xe,1e3))}function Xe(){if(se.textContent="\u0414\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F: ".concat(U," c."),U>0){U-=1;return}window.location.reload()}function ze(){var e=H(D.PRODUCT_CARD_LINK,j);e.length&&(b("promo_and_cashback")&&W(j,Tt,!1,"observerControlsContainer"),W(j,St),$e&&($e=!1,be(),wt(D.OBSERVED_SECTION_SELECTOR,"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0439 \u0434\u0435\u043D\u044C")),Qe())}function St(e,t){B(e,p.CONTAINER);var n=ot(Ue,p.CONTROL,p.NUMBER_INPUT),r=lt(Ge,p.CONTROL,p.NUMBER_INPUT),o=st(He,p.CONTROL,p.NUMBER_INPUT),l=Ve(p.CONTROL),g=Pe(Ke,p.CONTROL,p.CHECKBOX_INPUT);e.append(n,r,o,l,g),Se(t.firstChild,e)}function Tt(e,t){B(e,p.CONTAINER);var n=p.RELOAD_TIMER_CONTROL,r=oe("\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435, \u043C\u0438\u043D.: ",pe,.5,1,60,p.CONTROL,p.NUMBER_INPUT),o=oe("\u041C\u0438\u043D. \u0432 \u0441\u0435\u043A\u0446\u0438\u0438: ",qe,1,1,50,p.CONTROL,p.NUMBER_INPUT),l=we("\u041E\u043F\u043E\u0432\u0435\u0449\u0435\u043D\u0438\u0435: ",We,p.CONTROL,p.CHECKBOX_INPUT),g=Ve(p.CONTROL),m=Pe(he,p.CONTROL,p.CHECKBOX_INPUT);se=V(n,U),e.append(r,o,l,g,m,se),Se(t.firstChild,e)}function Qe(){var e=H(D.PRODUCT_CARD_LINK,j);e.forEach(xt)}function xt(e){var t=e.parentNode,n=t.parentNode.parentNode.parentNode;if(n.style.flex="none",n.style.width="25%",!Ke.value){me(n);return}var r=Nt(t),o=h(D.PRODUCT_CARD_PRICE_WRAP,n),l=Y(o,!0),g=x(r,Ue)||x(l,Ge)||et(l,He);nt(n,g)}function Nt(e){var t=h(D.PROMO_LABEL,e);if(!t)return 0;var n=t.innerText;return n.includes("%")?+L(n):0}})()})();})();
