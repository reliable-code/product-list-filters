// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/product-list-filters
// @version      0.6.73672377
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// ==/UserScript==

(()=>{(()=>{"use strict";var ee={9928:(S,v,e)=>{e.d(v,{S:()=>m,Sw:()=>g,d:()=>a,kU:()=>s,o5:()=>u});var c=e(4921),i=e(5539);function s(E,t,n){const h=l(E,"text",t);return h.value=n,h}function u(E,t,n,h,D,F){const I=l(E,"number",t);return I.value=n,I.step=h,I.min=D,I.max=F,I}function m(E,t,n){const h=l(E,"checkbox",t);return h.checked=n,h}function l(E={},t=null,n=null){const h=p("input",E);return t&&(h.type=t),n&&(h.addEventListener("keyup",(0,c.sg)(n,200)),h.addEventListener("change",(0,c.sg)(n,100))),h}function o(E={},t=null){return p("span",E,t)}function a(E={},t=null,n=null){const h=p("a",E,t);return n&&(h.href=n),h}function r(E={},t=null,n=null){const h=p("button",E,t);return n&&(h.onclick=n),h}function g(E={},t=null){return p("div",E,t)}function p(E,t,n=null){if(typeof t!="object"||t===null)throw new TypeError("styles should be an object");const h=document.createElement(E);return(0,i.ZM)(h,t),n&&(h.innerHTML=n),h}},573:(S,v,e)=>{e.d(v,{Fi:()=>s,YA:()=>o,fI:()=>u});var c=e(4214);function i(t,n=document){return!!n.querySelector(t)}function s(t,n=document,h=!1){const D=n.querySelector(t);return h&&!D&&console.log(`No element found for selector: ${t}`),D}function u(t,n=document,h=!1){const D=n.querySelectorAll(t);return h&&!D.length&&console.log(`No elements found for selector: ${t}`),D}function m(t,n,h){return[...t.querySelectorAll(n)].find(D=>D.textContent.trim().includes(h))}function l(t,n,h=!1,D=!1){const F=s(n,t,!0);return o(F,h,D)}function o(t,n=!1,h=!1,D=null){if(!t)return D===null?(console.log("No element found"),null):D;const F=t.innerText;return g(F,n,h)}function a(t,n,h=!1){const D=t[n];return o(D,h)}function r(t,n=!1,h=!1){const D=t.textContent;return g(D,n,h)}function g(t,n,h){return n&&(t=(0,c.zr)(t)),h&&(t=t.replace(",",".")),+t}function p(t){return[...t.childNodes].find(n=>n.nodeType===Node.TEXT_NODE)}function E(t){const n=h=>h.nodeType===Node.TEXT_NODE&&h.textContent.trim()!==""?[h]:[...h.childNodes].flatMap(n);return n(t)}},5539:(S,v,e)=>{e.d(v,{Bt:()=>i,UC:()=>o,WH:()=>c,ZM:()=>T,kl:()=>m});function c(f,O){f.parentNode.insertBefore(O,f.nextSibling)}function i(f){f.style.display="none"}function s(f){g(f),i(f)}function u(f){f.intersectionObserver||runOnceOnIntersection(f,()=>i(f))}function m(f){f.style.display=""}function l(f){const O=r(f);f.style.display=O}function o(f,O){O?i(f):m(f)}function a(f,O){O?u(f):(clearIntersectionObserver(f),m(f))}function r(f){return g(f),f.defaultDisplay}function g(f){if(f.defaultDisplay)return;const{display:O}=getComputedStyle(f);f.defaultDisplay=O}function p(){return{show:[],hide:[]}}function E(f,O,x){f?O.hide.push(x):O.show.push(x)}function t(f){f.show.forEach(m),f.hide.forEach(i)}function n(f,O,x=.3){O?D(f,x):h(f)}function h(f){f.style.opacity=""}function D(f,O=.3){f.style.opacity=O}function F(f){f.style.order=""}function I(f,O){f.style.order=O}function d(f,O){f.style.background=O}function C(f,O="custom-global-style"){let x=document.getElementById(O);x||(x=document.createElement("style"),x.id=O,x.type="text/css",document.head.appendChild(x)),x.textContent=f}function T(f,O){Object.assign(f.style,O)}function A(f){return Object.entries(f).map(([O,x])=>`${O.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${x};`).join(" ")}function P(f){return f?f.split(";").filter(O=>O.trim()!=="").reduce((O,x)=>{const[V,B]=x.split(":").map(K=>K.trim()),X=V.replace(/-([a-z])/g,(K,k)=>k.toUpperCase());return O[X]=B,O},{}):{}}},4921:(S,v,e)=>{e.d(v,{sg:()=>s,xk:()=>c});async function c(l,o,a=null){const r=l.querySelector(o);return r?Promise.resolve(r):new Promise(g=>{const p=new MutationObserver(t);p.observe(l,{childList:!0,subtree:!0});let E=null;a&&(E=setTimeout(()=>{p.disconnect(),console.log(`No element found for selector: ${o}`),g(null)},a));function t(){const n=l.querySelector(o);n&&(E&&clearTimeout(E),p.disconnect(),g(n))}})}async function i(l,o){return l.querySelector(o)?new Promise(r=>{const g=new MutationObserver(p);g.observe(l,{childList:!0,subtree:!0});function p(){l.querySelector(o)||(g.disconnect(),r())}}):Promise.resolve()}function s(l,o=250){let a;return(...r)=>{clearTimeout(a),a=setTimeout(()=>l(...r),o)}}function u(l,o){const a=new IntersectionObserver(r=>{r.forEach(g=>{g.isIntersecting&&(o(),m(l))})});l.intersectionObserver=a,a.observe(l)}function m(l){l.intersectionObserver&&(l.intersectionObserver.disconnect(),l.intersectionObserver=null)}},3829:(S,v,e)=>{e.d(v,{Ay:()=>i,JE:()=>u,iG:()=>m});var c=e(8355);function i(o,a){return!s(o,a)}function s(o,a){if(!a.value)return!0;const r=o.toLowerCase(),g=(0,c.R)(a),p=[],E=[];return g.forEach(t=>{if(t.startsWith("!")){const n=t.substring(1);n&&E.push(n)}else p.push(t)}),p.every(t=>r.includes(t))&&E.every(t=>!r.includes(t))}function u(o,a){return a.value!=null&&o<a.value}function m(o,a){return a.value!=null&&o>a.value}function l(o,a){return a.value&&o!==a.value}},4521:(S,v,e)=>{e.d(v,{z:()=>i});var c=e(3048);function i(s,u=null){return{createGlobalFilter(m,l=null,o=s){return c.V.create(m,l,o)},createSectionFilter(m,l=null,o=s){if(!u)throw new Error("sectionId must be provided to use createSectionFilter.");return c.V.createWithCompositeKey(u,m,l,o)}}}},5884:(S,v,e)=>{e.d(v,{Hw:()=>u,Nm:()=>i,nW:()=>s});var c=e(9928);function i(m,l,o={},a={}){const r=(0,c.Sw)(o,m),g=(0,c.kU)(a,l.updateValueFromEvent,l.value);return r.append(g),r}function s(m,l,o,a,r,g={},p={}){const E=(0,c.Sw)(g,m),t=(0,c.o5)(p,l.updateValueFromEvent,l.value,o,a,r);return E.append(t),E}function u(m,l,o={},a={}){const r=(0,c.Sw)(o,m),g=(0,c.S)(a,l.updateValueFromEvent,l.value);return r.append(g),r}},7877:(S,v,e)=>{e.d(v,{E9:()=>i,FR:()=>u,HX:()=>s,X0:()=>m,pW:()=>F});var c=e(5884);function i(I,d={},C={}){return(0,c.Nm)("\u041F\u043E\u0438\u0441\u043A: ",I,d,C)}function s(I,d={},C={},T=.1,A=3){return(0,c.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",I,T,A,5,d,C)}function u(I,d={},C={},T=.1,A=3){return(0,c.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",I,T,A,5,d,C)}function m(I,d={},C={}){return o("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",I,d,C)}function l(I,d={},C={}){return o("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",I,d,C)}function o(I,d,C={},T={}){return(0,c.nW)(I,d,"1","1","999999",C,T)}function a(I,d={},C={}){return r("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",I,d,C)}function r(I,d,C={},T={}){return createNumberFilterControl(I,d,"5","0","100",C,T)}function g(I,d={},C={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",I,"5","0","100",d,C)}function p(I,d,C={},T={},A="250"){return createNumberFilterControl(I,d,A,"0","1000000",C,T)}function E(I,d={},C={},T="25"){return p("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",I,d,C,T)}function t(I,d={},C={},T="25"){return p("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",I,d,C,T)}function n(I,d,C={},T={}){return createNumberFilterControl(I,d,"1","0","99999",C,T)}function h(I,d={},C={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",I,d,C)}function D(I,d={},C={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",I,d,C)}function F(I,d={},C={}){return(0,c.Hw)("\u0412\u043A\u043B: ",I,d,C)}},8355:(S,v,e)=>{e.d(v,{R:()=>c,f:()=>i});function c(s){return s.value.toLowerCase().split(",").map(u=>u.trim()).filter(u=>u!=="")}function i(s){return c(s).filter(u=>!u.startsWith("!"))}},5213:(S,v,e)=>{e.d(v,{b:()=>s});var c=e(9928),i=e(573);function s(u,m,l=!1,o="customFiltersContainer"){let a=(0,i.Fi)(`#${o}`,u);if(a)if(l)a.remove();else return;a=(0,c.Sw)(),a.id=o,m(a,u)}},8200:(S,v,e)=>{e.d(v,{s:()=>c});function c(i){const{target:s}=i,{type:u}=s;switch(u){case"text":return`"${s.value}"`;case"number":return s.value;case"checkbox":return s.checked;default:return console.log(`Unknown input type: ${u}`),null}}},157:(S,v,e)=>{e.d(v,{Fg:()=>c,IC:()=>u,vx:()=>s});const c=window.GM_setValue,i=window.GM.setValue,s=window.GM_getValue,u=window.GM_addValueChangeListener},1870:(S,v,e)=>{e.d(v,{j:()=>c});class c{constructor(s,u){this.value=s,this.onChange=u}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(S,v,e)=>{e.d(v,{V:()=>m});var c=e(1870),i=e(8200),s=e(3976),u=e(157);class m extends c.j{constructor(o,a=null,r=null){super((0,u.vx)(o,a),r),this.storageKey=o,this.defaultValue=a}static create(o,a=null,r=null){return new m(o,a,r)}static createWithCompositeKey(o,a,r=null,g=null){const p=`${o}-${a}`;return new m(p,r,g)}updateValueFromEvent=o=>{const a=(0,i.s)(o),r=(0,s.$)(a);this.updateValue(r)};updateValue(o){this.value!==o&&((0,u.Fg)(this.storageKey,o),this.value=o,this.onChangeIfDefined())}clearValue(){this.updateValue(null)}resetValue(){this.updateValue(this.defaultValue)}}},3976:(S,v,e)=>{e.d(v,{$:()=>c});function c(i){return i===""?null:JSON.parse(i)}},4214:(S,v,e)=>{e.d(v,{$z:()=>c,zr:()=>i});function c(m){return m.replace(/\D/g,"")}function i(m){return m.replace(/[^\d.,-]/g,"")}function s(m){return m.replace(/\s/g,"")}function u(m){return m.charAt(0).toUpperCase()+m.slice(1)}},5406:(S,v,e)=>{e.d(v,{Fc:()=>c,bn:()=>i,oS:()=>l,z2:()=>g});function c(p,E="common",t=!1){const{pathname:n}=window.location;return i(n,p,E,t)}function i(p,E,t,n=!1){const D=p.split("/")[E]||t;return n&&console.log(`Pathname element: ${D}`),D}function s(p,E="common",t=!1){const n=c(p,"",t);return u(n,E,t)}function u(p,E,t){if(!p)return E;const n=p.split("-").at(-1);return t&&console.log(`Pathname element ending: ${n}`),n}function m(p,E,t="common",n=!1){const h=i(p,E,"",n);return u(h,t,n)}function l(p){const E=window.location.search;return o(E,p)}function o(p,E){return new URLSearchParams(p).get(E)}function a(p){return window.location.pathname.includes(p)}function r(p){return p.some(E=>a(E))}function g(p){return window.location.pathname.split("/").some(t=>t===p)}},2524:(S,v,e)=>{e.d(v,{d5:()=>s,vX:()=>o,ft:()=>u});var c=e(157);class i{constructor(g=Date.now(),p=[]){this.lastCheckDate=g,this.reviewsData=p}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(g){const{lastCheckDate:p,reviewsData:E}=g;return new i(p,E)}}const s={LAST_DOCTOR_UPDATE:"last-doctor-update"};function u(r,g){const p=m(r),E=(0,c.vx)(p),t=l(E);t.reviewsData=g,t.updateLastCheckDate(),(0,c.Fg)(p,t),(0,c.Fg)(s.LAST_DOCTOR_UPDATE,Date.now())}function m(r){return`doctor-${r}`}function l(r){return r?i.fromObject(r):new i}function o(r){return a(r)?.reviewsData??null}function a(r){const g=m(r);return(0,c.vx)(g)}},1753:(S,v,e)=>{e.a(S,async(c,i)=>{try{var s=e(573),u=e(7858),m=e(4231),l=e(5406),o=e(5072);const r=(0,s.Fi)(".appointments_page");r?(0,m.$)(r):(0,l.z2)("otzivi")?await(0,o.N)():(0,l.z2)("vrach")&&(0,u.O)(),i()}catch(a){i(a)}},1)},7653:(S,v,e)=>{e.d(v,{NI:()=>r,z1:()=>E,Np:()=>D,pR:()=>t,sp:()=>I,rd:()=>F});var c=e(9928),i=e(573);const s={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var u=e(8586),m=e(5406),l=e(4214);const o="additionalLinksAppended",a=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function r(d,C){C.classList.contains(o)||(a.forEach(T=>{g(d,C,T)}),C.classList.add(o))}function g(d,C,T){const A=p(d,T),P=(0,c.d)({},T,A),f=document.createElement("br");C.append(f,P)}function p(d,C){const T=`${d} ${C}`;return`https://www.google.com/search?q=${encodeURIComponent(T)}&btnI`}function E(){const d=(0,i.Fi)(s.DOCTOR_CARD_NAME,document,!0);if(!d)return;const C=d.innerText.trim(),T=(0,c.Sw)();T.style.textAlign="center",(0,i.Fi)(s.DOCTOR_INTRO_LEFT).append(T),r(C,T)}function t(d,C,T=!1){const A=(0,c.Sw)(u.r.REVIEWS_INFO);T&&(A.style.justifyContent="center"),A.classList.add("v-application");const P=(0,c.Sw)(u.r.REVIEWS_INFO_BLOCK);return P.style.height=T?"10px":"23px",P.append(A),d.slice(T?1:0).forEach(f=>{const{category:O,title:x,count:V,bgClassSuffix:B}=f,X=`${C}?rates_category=${O}`,K=T?V:`${x} ${V}`,k=(0,c.d)(u.r.REVIEW_INFO,K,X);k.classList=n(B),A.append(k),T&&h(k,x)}),P}function n(d){return`text-caption ui-kit-color-text px-2 py-1 rounded ui-kit-bg-bg-${d}`}function h(d,C){let T=null;d.addEventListener("mouseenter",()=>{T=(0,c.Sw)(u.r.REVIEW_INFO_TOOLTIP,C),document.body.appendChild(T);const A=d.getBoundingClientRect();T.style.left=`${A.right+window.scrollX-2}px`,T.style.top=`${A.top+window.scrollY-T.offsetHeight+3}px`}),d.addEventListener("mouseleave",()=>{T&&(T.remove(),T=null)})}function D(d){const C=(0,i.Fi)(s.NAME_SPAN_HOLDER,document,!0);if(!C)return;const T=(0,i.Fi)(s.NAME_SPAN,C,!0);T&&T.append(d)}function F(){const d=(0,m.Fc)(3,"unknown");return(0,l.$z)(d)}function I(d){const C=(0,m.bn)(d,5,"");return(0,l.$z)(C)}},8586:(S,v,e)=>{e.d(v,{r:()=>i});const c={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},i={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...c.INPUT,width:"195px"},NUMBER_INPUT:{...c.INPUT,width:"70px"},CHECKBOX_INPUT:{...c.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none"},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(S,v,e)=>{e.d(v,{$:()=>O});var c=e(5406),i=e(573),s=e(5539),u=e(3829),m=e(7653),l=e(5213),o=e(5884),a=e(7877);const r={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".doctor-filters",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .mr-2 .ui-text",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var g=e(4521),p=e(2524),E=e(4921),t=e(157),n=e(8586);const h=(0,c.Fc)(2),{createGlobalFilter:D,createSectionFilter:F}=(0,g.z)(B,h),I=F("spec-filter"),d=F("clinic-filter"),C=F("min-reviews-filter",10),T=F("min-experience-filter",5,j),A=F("max-experience-filter",40),P=D("filter-enabled",!0),f={doctorCardsCache:new WeakMap};function O(w){j(),x();const y=(0,i.Fi)(r.DOCTOR_FILTERS);(0,l.b)(y,V),B(),(0,t.IC)(p.d5.LAST_DOCTOR_UPDATE,B),new MutationObserver((0,E.sg)(B)).observe(w,{childList:!0})}function x(){const w=(0,i.Fi)(r.LIST_HEADER);w&&w.remove()}function V(w,y){(0,s.ZM)(w,n.r.FILTERS_CONTAINER),w.style.marginTop="6px";const $=(0,o.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",I,n.r.CONTROL,n.r.TEXT_INPUT),R=(0,o.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",d,n.r.CONTROL,n.r.TEXT_INPUT),N=(0,a.X0)(C,n.r.CONTROL,n.r.NUMBER_INPUT),_=(0,o.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",T,"1","0","100",n.r.CONTROL,n.r.NUMBER_INPUT),b=(0,o.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",A,"1","0","100",n.r.CONTROL,n.r.NUMBER_INPUT),L=(0,a.pW)(P,n.r.CONTROL,n.r.CHECKBOX_INPUT);w.append($,R,N,_,b,L),y.append(w)}function B(){(0,i.fI)(r.DOCTOR_CARD).forEach(X)}function X(w){if(!P.value){(0,s.kl)(w);return}let y=f.doctorCardsCache.get(w);if(!y){const R=(0,i.Fi)(r.PROFILE_CARD,w),N=(0,i.Fi)(r.REVIEWS_LINK,R),_=(0,i.Fi)(r.EXPERIENCE_WRAP,w);if(!N||!_){(0,s.Bt)(w);return}const L=(0,i.Fi)(r.SPEC_WRAP,w,!0).innerText.trim(),W=(0,i.Fi)(r.CLINIC_CONTAINER,w,!0),U=(0,i.Fi)(r.CLINIC_WRAP,W,!0).innerText.trim(),H=(0,i.YA)(N,!0),G=(0,i.YA)(_,!0),q=K(N);N.href=q,(0,m.NI)(k(w),R),y={specInfo:L,clinicName:U,reviewsLinkNumber:H,experienceNumber:G,reviewsLink:N,reviewInfoAppended:!1},f.doctorCardsCache.set(w,y)}Q(y);const $=(0,u.Ay)(y.specInfo,I)||(0,u.Ay)(y.clinicName,d)||(0,u.JE)(y.reviewsLinkNumber,C)||(0,u.JE)(y.experienceNumber,T)||(0,u.iG)(y.experienceNumber,A);(0,s.UC)(w,$)}function K(w){return w.href.replace(/\/#otzivi$/,"/otzivi/")}function k(w){return(0,i.Fi)(r.DOCTOR_CARD_NAME,w,!0).innerText}function Q(w){if(w.reviewInfoAppended)return;const{reviewsLink:y}=w,$=y.href,R=(0,p.vX)((0,m.sp)($));if(!R)return;const N=(0,m.pR)(R,$,!0);(0,s.WH)(y,N),w.reviewInfoAppended=!0}function j(){if(!T.value)return;const w=new URL(window.location.href);+w.searchParams.get("experience")!==T.value&&(w.searchParams.set("experience",T.value),window.location.href=w.toString())}},7858:(S,v,e)=>{e.d(v,{O:()=>l});var c=e(573),i=e(9928),s=e(7653);const u={DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var m=e(2524);function l(){(0,s.z1)(),a();const r=(0,m.vX)((0,s.rd)());if(!r)return;const g=(0,s.pR)(r,o());(0,s.Np)(g)}function o(){const{location:r}=window;return`${r.origin}${r.pathname}otzivi/`}function a(){if(!(0,c.Fi)(u.DOCTOR_CONTACTS))return;const g=[...(0,c.fI)(u.DOCTOR_DETAILS)].pop();if(!g)return;g.style.position="sticky",g.style.top="16px";const p=(0,i.Sw)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");p.classList.add("b-doctor-details__toc-title");const E=(0,i.d)({},null,"#doctor-contacts");E.classList.add("b-doctor-details__toc-item"),E.append(p),g.insertBefore(E,g.firstChild)}},5072:(S,v,e)=>{e.d(v,{N:()=>X});var c=e(7653);const i={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#rating"};var s=e(573),u=e(4921),m=e(5406),l=e(2524),o=e(4521),a=e(5213),r=e(8586),g=e(7877),p=e(5539);function E(R,N){R.forEach(_=>t(N,_))}function t(R,N){if(!N)return;const _=new RegExp(`(${N})`,"gi"),b=document.createTreeWalker(R,NodeFilter.SHOW_TEXT,null);let L=b.nextNode();const W=[];for(;L;){const{textContent:M}=L;if(_.test(M)){const U=document.createDocumentFragment();let H=0;M.replace(_,(G,q,J)=>{J>H&&U.appendChild(document.createTextNode(M.slice(H,J)));const Y=document.createElement("span");Y.className="highlightedSubstring",Y.style.backgroundColor="yellow",Y.textContent=G,U.appendChild(Y),H=J+G.length}),H<M.length&&U.appendChild(document.createTextNode(M.slice(H))),W.push({node:L,fragment:U})}L=b.nextNode()}W.forEach(({node:M,fragment:U})=>{M.parentNode.replaceChild(U,M)})}function n(R){(0,s.fI)(".highlightedSubstring",R).forEach(_=>{const{parentNode:b}=_;_.replaceWith(_.textContent),b.normalize()})}var h=e(8355);function D(R,N){const _=(0,h.f)(R);E(_,N)}function F(R,N){const _=getIncludedSearchStrings(R);N.forEach(b=>highlightSubstrings(_,b))}var I=e(3829),d=e(9928);function C(R={}){return(0,d.Sw)(R,"|")}function T(R={},N=75,_="customFiltersContainer"){const b=document.getElementById(_);if(!b)return console.log(`Element with id="${_}" not found.`),null;const L=createButton(R,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return L.addEventListener("mouseover",()=>{L.style.filter="brightness(0.9)"}),L.addEventListener("mouseout",()=>{L.style.filter="brightness(1)"}),L.addEventListener("click",()=>{const W=b.getBoundingClientRect();window.scrollTo({top:W.top+window.scrollY-N})}),new IntersectionObserver(([W])=>{L.style.display=W.isIntersecting?"none":"flex"},{threshold:.5}).observe(b),L}function A(R,N={}){const _=T(N);_&&R.appendChild(_)}const{createGlobalFilter:P}=(0,o.z)(k),f=P("reviews-text-filter"),O=P("reviews-min-rating-filter"),x=P("reviews-max-rating-filter"),V=P("reviews-filter-enabled",!0),B={reviewCardsCache:new Map};async function X(){(0,c.z1)();const R=await(0,u.xk)(document,i.CONTROLS_CONTAINER);(0,a.b)(R,K),k();const N=await j();(0,l.ft)((0,c.rd)(),N);const _=(0,c.pR)(N,y());(0,c.Np)(_),(0,m.oS)("rates_category")&&$()}function K(R,N){(0,p.ZM)(R,r.r.FILTERS_CONTAINER),R.style.marginTop="12px";const _=(0,g.E9)(f,r.r.CONTROL,r.r.TEXT_INPUT),b=(0,g.HX)(O,r.r.CONTROL,r.r.NUMBER_INPUT,1,1),L=(0,g.FR)(x,r.r.CONTROL,r.r.NUMBER_INPUT,1,1),W=C(r.r.CONTROL),M=(0,g.pW)(V,r.r.CONTROL,r.r.CHECKBOX_INPUT);R.append(_,b,L,W,M),N.append(R)}function k(){(0,s.fI)(i.REVIEWS).forEach(Q)}function Q(R){if(!V.value){(0,p.kl)(R);return}n(R);let N=B.reviewCardsCache.get(R);if(!N){const b=(0,s.Fi)(i.REVIEW_TEXT_WRAP,R),L=(0,s.Fi)(i.REVIEW_RATING_WRAP,R);if(!b||!L){(0,p.Bt)(R);return}N={reviewTextWrap:b,reviewText:b.innerText,rating:(0,s.YA)(L)},B.reviewCardsCache.set(R,N)}f.value&&D(f,N.reviewTextWrap);const _=(0,I.Ay)(N.reviewText,f)||(0,I.JE)(N.rating,O)||(0,I.iG)(N.rating,x);(0,p.UC)(R,_)}async function j(){const R=(0,s.Fi)(i.FILTER_CHIP);R.click();const N=await(0,u.xk)(document,i.FILTER_LIST),_=[...(0,s.fI)(i.FILTER_LIST_ITEM,N)].map(b=>{const L=b.getAttribute("data-qa");if(!L)return null;const W=L.replace("reviews_filter_list_item_",""),M=(0,s.Fi)(i.FILTER_TITLE_WRAP,b).textContent.trim(),U=(0,s.Fi)(i.FILTER_COUNT_WRAP,b),H=(0,s.YA)(U,!0),G=w(U.classList);return{category:W,title:M,count:H,bgClassSuffix:G}});return R.click(),_}function w(R){const N=R.value.match(/ui-kit-bg-bg-(\w+)/);return N?N[1]:null}function y(){const{location:R}=window;return`${R.origin}${R.pathname}`}function $(){(0,s.Fi)(i.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},Z={};function z(S){var v=Z[S];if(v!==void 0)return v.exports;var e=Z[S]={exports:{}};return ee[S](e,e.exports,z),e.exports}(()=>{var S=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",v=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",c=s=>{s&&s.d<1&&(s.d=1,s.forEach(u=>u.r--),s.forEach(u=>u.r--?u.r++:u()))},i=s=>s.map(u=>{if(u!==null&&typeof u=="object"){if(u[S])return u;if(u.then){var m=[];m.d=0,u.then(a=>{l[v]=a,c(m)},a=>{l[e]=a,c(m)});var l={};return l[S]=a=>a(m),l}}var o={};return o[S]=a=>{},o[v]=u,o});z.a=(s,u,m)=>{var l;m&&((l=[]).d=-1);var o=new Set,a=s.exports,r,g,p,E=new Promise((t,n)=>{p=n,g=t});E[v]=a,E[S]=t=>(l&&t(l),o.forEach(t),E.catch(n=>{})),s.exports=E,u(t=>{r=i(t);var n,h=()=>r.map(F=>{if(F[e])throw F[e];return F[v]}),D=new Promise(F=>{n=()=>F(h),n.r=0;var I=d=>d!==l&&!o.has(d)&&(o.add(d),d&&!d.d&&(n.r++,d.push(n)));r.map(d=>d[S](I))});return n.r?D:h()},t=>(t?p(E[e]=t):g(a),c(l))),l&&l.d<0&&(l.d=0)}})(),z.d=(S,v)=>{for(var e in v)z.o(v,e)&&!z.o(S,e)&&Object.defineProperty(S,e,{enumerable:!0,get:v[e]})},z.o=(S,v)=>Object.prototype.hasOwnProperty.call(S,v);var te=z(1753)})();})();
