// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/product-list-filters
// @version      0.6.73688152
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// ==/UserScript==

(()=>{(()=>{"use strict";var ee={9928:(O,E,e)=>{e.d(E,{S:()=>m,Sw:()=>v,d:()=>l,kU:()=>c,o5:()=>a});var u=e(4921),i=e(5539);function c(I,r,t){const s=f(I,"text",r);return s.value=t,s}function a(I,r,t,s,N,w){const T=f(I,"number",r);return T.value=t,T.step=s,T.min=N,T.max=w,T}function m(I,r,t){const s=f(I,"checkbox",r);return s.checked=t,s}function f(I={},r=null,t=null){const s=R("input",I);return r&&(s.type=r),t&&(s.addEventListener("keyup",(0,u.sg)(t,200)),s.addEventListener("change",(0,u.sg)(t,100))),s}function o(I={},r=null){return R("span",I,r)}function l(I={},r=null,t=null){const s=R("a",I,r);return t&&(s.href=t),s}function n(I={},r=null,t=null){const s=R("button",I,r);return t&&(s.onclick=t),s}function v(I={},r=null){return R("div",I,r)}function R(I,r,t=null){if(typeof r!="object"||r===null)throw new TypeError("styles should be an object");const s=document.createElement(I);return(0,i.ZM)(s,r),t&&(s.innerHTML=t),s}},573:(O,E,e)=>{e.d(E,{Fi:()=>c,YA:()=>o,fI:()=>a});var u=e(4214);function i(r,t=document){return!!t.querySelector(r)}function c(r,t=document,s=!1){const N=t.querySelector(r);return s&&!N&&console.log(`No element found for selector: ${r}`),N}function a(r,t=document,s=!1){const N=t.querySelectorAll(r);return s&&!N.length&&console.log(`No elements found for selector: ${r}`),N}function m(r,t,s){return[...r.querySelectorAll(t)].find(N=>N.textContent.trim().includes(s))}function f(r,t,s=!1,N=!1){const w=c(t,r,!0);return o(w,s,N)}function o(r,t=!1,s=!1,N=null){if(!r)return N===null?(console.log("No element found"),null):N;const w=r.innerText;return v(w,t,s)}function l(r,t,s=!1){const N=r[t];return o(N,s)}function n(r,t=!1,s=!1){const N=r.textContent;return v(N,t,s)}function v(r,t,s){return t&&(r=(0,u.zr)(r)),s&&(r=r.replace(",",".")),+r}function R(r){return[...r.childNodes].find(t=>t.nodeType===Node.TEXT_NODE)}function I(r){const t=s=>s.nodeType===Node.TEXT_NODE&&s.textContent.trim()!==""?[s]:[...s.childNodes].flatMap(t);return t(r)}},5539:(O,E,e)=>{e.d(E,{Bt:()=>i,UC:()=>o,WH:()=>u,ZM:()=>L,kl:()=>m});function u(p,S){p.parentNode.insertBefore(S,p.nextSibling)}function i(p){p.style.display="none"}function c(p){v(p),i(p)}function a(p){p.intersectionObserver||runOnceOnIntersection(p,()=>i(p))}function m(p){p.style.display=""}function f(p){const S=n(p);p.style.display=S}function o(p,S){S?i(p):m(p)}function l(p,S){S?a(p):(clearIntersectionObserver(p),m(p))}function n(p){return v(p),p.defaultDisplay}function v(p){if(p.defaultDisplay)return;const{display:S}=getComputedStyle(p);p.defaultDisplay=S}function R(){return{show:[],hide:[]}}function I(p,S,y){p?S.hide.push(y):S.show.push(y)}function r(p){p.show.forEach(m),p.hide.forEach(i)}function t(p,S,y=.3){S?N(p,y):s(p)}function s(p){p.style.opacity=""}function N(p,S=.3){p.style.opacity=S}function w(p){p.style.order=""}function T(p,S){p.style.order=S}function d(p,S){p.style.background=S}function h(){const p=getQueryParam("scrollTo");if(!p)return;const S=document.getElementById(p);S?S.scrollIntoView():console.log(`Element with ID "${p}" was not found.`)}function C(p,S="custom-global-style"){let y=document.getElementById(S);y||(y=document.createElement("style"),y.id=S,y.type="text/css",document.head.appendChild(y)),y.textContent=p}function L(p,S){Object.assign(p.style,S)}function P(p){return Object.entries(p).map(([S,y])=>`${S.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${y};`).join(" ")}function W(p){return p?p.split(";").filter(S=>S.trim()!=="").reduce((S,y)=>{const[B,X]=y.split(":").map(U=>U.trim()),G=B.replace(/-([a-z])/g,(U,j)=>j.toUpperCase());return S[G]=X,S},{}):{}}},4921:(O,E,e)=>{e.d(E,{sg:()=>c,xk:()=>u});async function u(f,o,l=null){const n=f.querySelector(o);return n?Promise.resolve(n):new Promise(v=>{const R=new MutationObserver(r);R.observe(f,{childList:!0,subtree:!0});let I=null;l&&(I=setTimeout(()=>{R.disconnect(),console.log(`No element found for selector: ${o}`),v(null)},l));function r(){const t=f.querySelector(o);t&&(I&&clearTimeout(I),R.disconnect(),v(t))}})}async function i(f,o){return f.querySelector(o)?new Promise(n=>{const v=new MutationObserver(R);v.observe(f,{childList:!0,subtree:!0});function R(){f.querySelector(o)||(v.disconnect(),n())}}):Promise.resolve()}function c(f,o=250){let l;return(...n)=>{clearTimeout(l),l=setTimeout(()=>f(...n),o)}}function a(f,o){const l=new IntersectionObserver(n=>{n.forEach(v=>{v.isIntersecting&&(o(),m(f))})});f.intersectionObserver=l,l.observe(f)}function m(f){f.intersectionObserver&&(f.intersectionObserver.disconnect(),f.intersectionObserver=null)}},3829:(O,E,e)=>{e.d(E,{Ay:()=>i,JE:()=>a,iG:()=>m});var u=e(8355);function i(o,l){return!c(o,l)}function c(o,l){if(!l.value)return!0;const n=o.toLowerCase(),v=(0,u.R)(l),R=[],I=[];return v.forEach(r=>{if(r.startsWith("!")){const t=r.substring(1);t&&I.push(t)}else R.push(r)}),R.every(r=>n.includes(r))&&I.every(r=>!n.includes(r))}function a(o,l){return l.value!=null&&o<l.value}function m(o,l){return l.value!=null&&o>l.value}function f(o,l){return l.value&&o!==l.value}},4521:(O,E,e)=>{e.d(E,{z:()=>i});var u=e(3048);function i(c,a=null){return{createGlobalFilter(m,f=null,o=c){return u.V.create(m,f,o)},createSectionFilter(m,f=null,o=c){if(!a)throw new Error("sectionId must be provided to use createSectionFilter.");return u.V.createWithCompositeKey(a,m,f,o)}}}},5884:(O,E,e)=>{e.d(E,{Hw:()=>a,Nm:()=>i,nW:()=>c});var u=e(9928);function i(m,f,o={},l={}){const n=(0,u.Sw)(o,m),v=(0,u.kU)(l,f.updateValueFromEvent,f.value);return n.append(v),n}function c(m,f,o,l,n,v={},R={}){const I=(0,u.Sw)(v,m),r=(0,u.o5)(R,f.updateValueFromEvent,f.value,o,l,n);return I.append(r),I}function a(m,f,o={},l={}){const n=(0,u.Sw)(o,m),v=(0,u.S)(l,f.updateValueFromEvent,f.value);return n.append(v),n}},7877:(O,E,e)=>{e.d(E,{E9:()=>i,FR:()=>a,HX:()=>c,X0:()=>m,pW:()=>w});var u=e(5884);function i(T,d={},h={}){return(0,u.Nm)("\u041F\u043E\u0438\u0441\u043A: ",T,d,h)}function c(T,d={},h={},C=.1,L=3){return(0,u.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",T,C,L,5,d,h)}function a(T,d={},h={},C=.1,L=3){return(0,u.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",T,C,L,5,d,h)}function m(T,d={},h={}){return o("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",T,d,h)}function f(T,d={},h={}){return o("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",T,d,h)}function o(T,d,h={},C={}){return(0,u.nW)(T,d,"1","1","999999",h,C)}function l(T,d={},h={}){return n("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",T,d,h)}function n(T,d,h={},C={}){return createNumberFilterControl(T,d,"5","0","100",h,C)}function v(T,d={},h={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",T,"5","0","100",d,h)}function R(T,d,h={},C={},L="250"){return createNumberFilterControl(T,d,L,"0","1000000",h,C)}function I(T,d={},h={},C="25"){return R("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",T,d,h,C)}function r(T,d={},h={},C="25"){return R("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",T,d,h,C)}function t(T,d,h={},C={}){return createNumberFilterControl(T,d,"1","0","99999",h,C)}function s(T,d={},h={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",T,d,h)}function N(T,d={},h={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",T,d,h)}function w(T,d={},h={}){return(0,u.Hw)("\u0412\u043A\u043B: ",T,d,h)}},8355:(O,E,e)=>{e.d(E,{R:()=>u,f:()=>i});function u(c){return c.value.toLowerCase().split(",").map(a=>a.trim()).filter(a=>a!=="")}function i(c){return u(c).filter(a=>!a.startsWith("!"))}},5213:(O,E,e)=>{e.d(E,{b:()=>c});var u=e(9928),i=e(573);function c(a,m,f=!1,o="customFiltersContainer"){let l=(0,i.Fi)(`#${o}`,a);if(l)if(f)l.remove();else return;l=(0,u.Sw)(),l.id=o,m(l,a)}},8200:(O,E,e)=>{e.d(E,{s:()=>u});function u(i){const{target:c}=i,{type:a}=c;switch(a){case"text":return`"${c.value}"`;case"number":return c.value;case"checkbox":return c.checked;default:return console.log(`Unknown input type: ${a}`),null}}},157:(O,E,e)=>{e.d(E,{Fg:()=>u,IC:()=>a,vx:()=>c});const u=window.GM_setValue,i=window.GM.setValue,c=window.GM_getValue,a=window.GM_addValueChangeListener},1870:(O,E,e)=>{e.d(E,{j:()=>u});class u{constructor(c,a){this.value=c,this.onChange=a}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(O,E,e)=>{e.d(E,{V:()=>m});var u=e(1870),i=e(8200),c=e(3976),a=e(157);class m extends u.j{constructor(o,l=null,n=null){super((0,a.vx)(o,l),n),this.storageKey=o,this.defaultValue=l}static create(o,l=null,n=null){return new m(o,l,n)}static createWithCompositeKey(o,l,n=null,v=null){const R=`${o}-${l}`;return new m(R,n,v)}updateValueFromEvent=o=>{const l=(0,i.s)(o),n=(0,c.$)(l);this.updateValue(n)};updateValue(o){this.value!==o&&((0,a.Fg)(this.storageKey,o),this.value=o,this.onChangeIfDefined())}clearValue(){this.updateValue(null)}resetValue(){this.updateValue(this.defaultValue)}}},3976:(O,E,e)=>{e.d(E,{$:()=>u});function u(i){return i===""?null:JSON.parse(i)}},4214:(O,E,e)=>{e.d(E,{$z:()=>u,zr:()=>i});function u(m){return m.replace(/\D/g,"")}function i(m){return m.replace(/[^\d.,-]/g,"")}function c(m){return m.replace(/\s/g,"")}function a(m){return m.charAt(0).toUpperCase()+m.slice(1)}},5406:(O,E,e)=>{e.d(E,{Fc:()=>u,bn:()=>i,oS:()=>f,z2:()=>v});function u(t,s="common",N=!1){const{pathname:w}=window.location;return i(w,t,s,N)}function i(t,s,N,w=!1){const d=t.split("/")[s]||N;return w&&console.log(`Pathname element: ${d}`),d}function c(t,s="common",N=!1){const w=u(t,"",N);return a(w,s,N)}function a(t,s,N){if(!t)return s;const w=t.split("-").at(-1);return N&&console.log(`Pathname element ending: ${w}`),w}function m(t,s,N="common",w=!1){const T=i(t,s,"",w);return a(T,N,w)}function f(t){const s=window.location.search;return o(s,t)}function o(t,s){return new URLSearchParams(t).get(s)}function l(t){return window.location.pathname.includes(t)}function n(t){return t.some(s=>l(s))}function v(t){return window.location.pathname.split("/").some(N=>N===t)}function R(t){return new URLSearchParams(window.location.search).get(t)}function I(t){return t.split("?")[0]}function r(t){try{const s=new URL(window.location.href);Object.entries(t).forEach(([N,w])=>{s.searchParams.set(N,w)}),window.location.href=s.toString()}catch(s){console.error("Failed to redirect:",s)}}},2524:(O,E,e)=>{e.d(E,{d5:()=>c,vX:()=>o,ft:()=>a});var u=e(157);class i{constructor(v=Date.now(),R=[]){this.lastCheckDate=v,this.reviewsData=R}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(v){const{lastCheckDate:R,reviewsData:I}=v;return new i(R,I)}}const c={LAST_DOCTOR_UPDATE:"last-doctor-update"};function a(n,v){const R=m(n),I=(0,u.vx)(R),r=f(I);r.reviewsData=v,r.updateLastCheckDate(),(0,u.Fg)(R,r),(0,u.Fg)(c.LAST_DOCTOR_UPDATE,Date.now())}function m(n){return`doctor-${n}`}function f(n){return n?i.fromObject(n):new i}function o(n){return l(n)?.reviewsData??null}function l(n){const v=m(n);return(0,u.vx)(v)}},1753:(O,E,e)=>{e.a(O,async(u,i)=>{try{var c=e(573),a=e(7858),m=e(4231),f=e(5406),o=e(5072);const n=(0,c.Fi)(".appointments_page");n?(0,m.$)(n):(0,f.z2)("otzivi")?await(0,o.N)():(0,f.z2)("vrach")&&(0,a.O)(),i()}catch(l){i(l)}},1)},7653:(O,E,e)=>{e.d(E,{NI:()=>n,z1:()=>I,Np:()=>N,pR:()=>r,sp:()=>T,rd:()=>w});var u=e(9928),i=e(573);const c={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var a=e(8586),m=e(5406),f=e(4214);const o="additionalLinksAppended",l=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function n(d,h){h.classList.contains(o)||(l.forEach(C=>{v(d,h,C)}),h.classList.add(o))}function v(d,h,C){const L=R(d,C),P=(0,u.d)({},C,L),W=document.createElement("br");h.append(W,P)}function R(d,h){const C=`${d} ${h}`;return`https://www.google.com/search?q=${encodeURIComponent(C)}&btnI`}function I(){const d=(0,i.Fi)(c.DOCTOR_CARD_NAME,document,!0);if(!d)return;const h=d.innerText.trim(),C=(0,u.Sw)();C.style.textAlign="center",(0,i.Fi)(c.DOCTOR_INTRO_LEFT).append(C),n(h,C)}function r(d,h,C=!1){const L=(0,u.Sw)(a.r.REVIEWS_INFO);C&&(L.style.justifyContent="center"),L.classList.add("v-application");const P=(0,u.Sw)(a.r.REVIEWS_INFO_BLOCK);return P.style.height=C?"10px":"23px",P.append(L),d.slice(C?1:0).forEach(W=>{const{category:p,title:S,count:y,bgClassSuffix:B}=W,X=`${h}?rates_category=${p}`,G=C?y:`${S} ${y}`,U=(0,u.d)(a.r.REVIEW_INFO,G,X);U.classList=t(B),L.append(U),C&&s(U,S)}),P}function t(d){return`text-caption ui-kit-color-text px-2 py-1 rounded ui-kit-bg-bg-${d}`}function s(d,h){let C=null;d.addEventListener("mouseenter",()=>{C=(0,u.Sw)(a.r.REVIEW_INFO_TOOLTIP,h),document.body.appendChild(C);const L=d.getBoundingClientRect();C.style.left=`${(L.left+L.right)/2-C.offsetWidth/2+window.scrollX+2}px`,C.style.top=`${L.top+window.scrollY-C.offsetHeight-4}px`}),d.addEventListener("mouseleave",()=>{C&&(C.remove(),C=null)})}function N(d){const h=(0,i.Fi)(c.NAME_SPAN_HOLDER,document,!0);if(!h)return;const C=(0,i.Fi)(c.NAME_SPAN,h,!0);C&&C.append(d)}function w(){const d=(0,m.Fc)(3,"unknown");return(0,f.$z)(d)}function T(d){const h=(0,m.bn)(d,5,"");return(0,f.$z)(h)}},8586:(O,E,e)=>{e.d(E,{r:()=>i});const u={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},i={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...u.INPUT,width:"195px"},NUMBER_INPUT:{...u.INPUT,width:"70px"},CHECKBOX_INPUT:{...u.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none",flexShrink:0},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(O,E,e)=>{e.d(E,{$:()=>p});var u=e(5406),i=e(573),c=e(5539),a=e(3829),m=e(7653),f=e(5213),o=e(5884),l=e(7877);const n={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".doctor-filters",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .mr-2 .ui-text",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var v=e(4521),R=e(2524),I=e(4921),r=e(157),t=e(8586);const s=(0,u.Fc)(2),{createGlobalFilter:N,createSectionFilter:w}=(0,v.z)(B,s),T=w("spec-filter"),d=w("clinic-filter"),h=w("min-reviews-filter",10),C=w("min-experience-filter",5,Y),L=w("max-experience-filter",40),P=N("filter-enabled",!0),W={doctorCardsCache:new WeakMap};function p(D){Y(),S();const A=(0,i.Fi)(n.DOCTOR_FILTERS);(0,f.b)(A,y),B(),(0,r.IC)(R.d5.LAST_DOCTOR_UPDATE,B),new MutationObserver((0,I.sg)(B)).observe(D,{childList:!0})}function S(){const D=(0,i.Fi)(n.LIST_HEADER);D&&D.remove()}function y(D,A){(0,c.ZM)(D,t.r.FILTERS_CONTAINER),D.style.marginTop="6px";const $=(0,o.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",T,t.r.CONTROL,t.r.TEXT_INPUT),H=(0,o.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",d,t.r.CONTROL,t.r.TEXT_INPUT),g=(0,l.X0)(h,t.r.CONTROL,t.r.NUMBER_INPUT),_=(0,o.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",C,"1","0","100",t.r.CONTROL,t.r.NUMBER_INPUT),F=(0,o.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",L,"1","0","100",t.r.CONTROL,t.r.NUMBER_INPUT),x=(0,l.pW)(P,t.r.CONTROL,t.r.CHECKBOX_INPUT);D.append($,H,g,_,F,x),A.append(D)}function B(){(0,i.fI)(n.DOCTOR_CARD).forEach(X)}function X(D){if(!P.value){(0,c.kl)(D);return}let A=W.doctorCardsCache.get(D);if(!A){const H=(0,i.Fi)(n.PROFILE_CARD,D),g=(0,i.Fi)(n.REVIEWS_LINK,H),_=(0,i.Fi)(n.EXPERIENCE_WRAP,D);if(!g||!_){(0,c.Bt)(D);return}const x=(0,i.Fi)(n.SPEC_WRAP,D,!0).innerText.trim(),b=(0,i.Fi)(n.CLINIC_CONTAINER,D,!0),M=(0,i.Fi)(n.CLINIC_WRAP,b,!0).innerText.trim(),V=(0,i.YA)(g,!0),K=(0,i.YA)(_,!0),Q=G(g);g.href=Q,(0,m.NI)(U(D),H),A={specInfo:x,clinicName:M,reviewsLinkNumber:V,experienceNumber:K,reviewsLink:g,reviewInfoAppended:!1},W.doctorCardsCache.set(D,A)}j(A);const $=(0,a.Ay)(A.specInfo,T)||(0,a.Ay)(A.clinicName,d)||(0,a.JE)(A.reviewsLinkNumber,h)||(0,a.JE)(A.experienceNumber,C)||(0,a.iG)(A.experienceNumber,L);(0,c.UC)(D,$)}function G(D){return D.href.replace(/\/#otzivi$/,"/otzivi/")}function U(D){return(0,i.Fi)(n.DOCTOR_CARD_NAME,D,!0).innerText}function j(D){if(D.reviewInfoAppended)return;const{reviewsLink:A}=D,$=A.href,H=(0,R.vX)((0,m.sp)($));if(!H)return;const g=(0,m.pR)(H,$,!0);(0,c.WH)(A,g),D.reviewInfoAppended=!0}function Y(){if(!C.value)return;const D=new URL(window.location.href);+D.searchParams.get("experience")!==C.value&&(D.searchParams.set("experience",C.value),window.location.href=D.toString())}},7858:(O,E,e)=>{e.d(E,{O:()=>f});var u=e(573),i=e(9928),c=e(7653);const a={DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var m=e(2524);function f(){(0,c.z1)(),l();const n=(0,m.vX)((0,c.rd)());if(!n)return;const v=(0,c.pR)(n,o());(0,c.Np)(v)}function o(){const{location:n}=window;return`${n.origin}${n.pathname}otzivi/`}function l(){if(!(0,u.Fi)(a.DOCTOR_CONTACTS))return;const v=[...(0,u.fI)(a.DOCTOR_DETAILS)].pop();if(!v)return;v.style.position="sticky",v.style.top="16px";const R=(0,i.Sw)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");R.classList.add("b-doctor-details__toc-title");const I=(0,i.d)({},null,"#doctor-contacts");I.classList.add("b-doctor-details__toc-item"),I.append(R),v.insertBefore(I,v.firstChild)}},5072:(O,E,e)=>{e.d(E,{N:()=>X});var u=e(7653);const i={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#rating"};var c=e(573),a=e(4921),m=e(5406),f=e(2524),o=e(4521),l=e(5213),n=e(8586),v=e(7877),R=e(5539);function I(g,_){g.forEach(F=>r(_,F))}function r(g,_){if(!_)return;const F=new RegExp(`(${_})`,"gi"),x=document.createTreeWalker(g,NodeFilter.SHOW_TEXT,null);let b=x.nextNode();const k=[];for(;b;){const{textContent:M}=b;if(F.test(M)){const V=document.createDocumentFragment();let K=0;M.replace(F,(Q,ne,Z)=>{Z>K&&V.appendChild(document.createTextNode(M.slice(K,Z)));const J=document.createElement("span");J.className="highlightedSubstring",J.style.backgroundColor="yellow",J.textContent=Q,V.appendChild(J),K=Z+Q.length}),K<M.length&&V.appendChild(document.createTextNode(M.slice(K))),k.push({node:b,fragment:V})}b=x.nextNode()}k.forEach(({node:M,fragment:V})=>{M.parentNode.replaceChild(V,M)})}function t(g){(0,c.fI)(".highlightedSubstring",g).forEach(F=>{const{parentNode:x}=F;F.replaceWith(F.textContent),x.normalize()})}var s=e(8355);function N(g,_){const F=(0,s.f)(g);I(F,_)}function w(g,_){const F=getIncludedSearchStrings(g);_.forEach(x=>highlightSubstrings(F,x))}var T=e(3829),d=e(9928);function h(g={}){return(0,d.Sw)(g,"|")}function C(g={},_=75,F="customFiltersContainer"){const x=document.getElementById(F);if(!x)return console.log(`Element with id="${F}" not found.`),null;const b=createButton(g,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return b.addEventListener("mouseover",()=>{b.style.filter="brightness(0.9)"}),b.addEventListener("mouseout",()=>{b.style.filter="brightness(1)"}),b.addEventListener("click",()=>{const k=x.getBoundingClientRect();window.scrollTo({top:k.top+window.scrollY-_})}),new IntersectionObserver(([k])=>{b.style.display=k.isIntersecting?"none":"flex"},{threshold:.5}).observe(x),b}function L(g,_={}){const F=C(_);F&&g.appendChild(F)}const{createGlobalFilter:P}=(0,o.z)(U),W=P("reviews-text-filter"),p=P("reviews-min-rating-filter"),S=P("reviews-max-rating-filter"),y=P("reviews-filter-enabled",!0),B={reviewCardsCache:new Map};async function X(){(0,u.z1)();const g=await(0,a.xk)(document,i.CONTROLS_CONTAINER);(0,l.b)(g,G),U();const _=await D();(0,f.ft)((0,u.rd)(),_);const F=(0,u.pR)(_,$());(0,u.Np)(F),(0,m.oS)("rates_category")&&H()}function G(g,_){(0,R.ZM)(g,n.r.FILTERS_CONTAINER),g.style.marginTop="12px";const F=(0,v.E9)(W,n.r.CONTROL,n.r.TEXT_INPUT),x=(0,v.HX)(p,n.r.CONTROL,n.r.NUMBER_INPUT,1,1),b=(0,v.FR)(S,n.r.CONTROL,n.r.NUMBER_INPUT,1,1),k=h(n.r.CONTROL),M=(0,v.pW)(y,n.r.CONTROL,n.r.CHECKBOX_INPUT);g.append(F,x,b,k,M),_.append(g)}function U(){(0,c.fI)(i.REVIEWS).forEach(j)}function j(g){if(!y.value){(0,R.kl)(g);return}t(g);let _=B.reviewCardsCache.get(g);if(!_){const x=(0,c.Fi)(i.REVIEW_TEXT_WRAP,g),b=(0,c.Fi)(i.REVIEW_RATING_WRAP,g);if(!x){(0,R.Bt)(g);return}_={reviewTextWrap:x,reviewText:x.innerText,rating:b&&(0,c.YA)(b)},B.reviewCardsCache.set(g,_)}W.value&&N(W,_.reviewTextWrap);const F=(0,T.Ay)(_.reviewText,W)||Y(_.rating);(0,R.UC)(g,F)}function Y(g){return g?(0,T.JE)(g,p)||(0,T.iG)(g,S):!1}async function D(){const g=(0,c.Fi)(i.FILTER_CHIP);g.click();const _=await(0,a.xk)(document,i.FILTER_LIST),F=[...(0,c.fI)(i.FILTER_LIST_ITEM,_)].map(x=>{const b=x.getAttribute("data-qa");if(!b)return null;const k=b.replace("reviews_filter_list_item_",""),M=(0,c.Fi)(i.FILTER_TITLE_WRAP,x).textContent.trim(),V=(0,c.Fi)(i.FILTER_COUNT_WRAP,x),K=(0,c.YA)(V,!0),Q=A(V.classList);return{category:k,title:M,count:K,bgClassSuffix:Q}});return g.click(),F}function A(g){const _=g.value.match(/ui-kit-bg-bg-(\w+)/);return _?_[1]:null}function $(){const{location:g}=window;return`${g.origin}${g.pathname}`}function H(){(0,c.Fi)(i.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},q={};function z(O){var E=q[O];if(E!==void 0)return E.exports;var e=q[O]={exports:{}};return ee[O](e,e.exports,z),e.exports}(()=>{var O=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",E=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",u=c=>{c&&c.d<1&&(c.d=1,c.forEach(a=>a.r--),c.forEach(a=>a.r--?a.r++:a()))},i=c=>c.map(a=>{if(a!==null&&typeof a=="object"){if(a[O])return a;if(a.then){var m=[];m.d=0,a.then(l=>{f[E]=l,u(m)},l=>{f[e]=l,u(m)});var f={};return f[O]=l=>l(m),f}}var o={};return o[O]=l=>{},o[E]=a,o});z.a=(c,a,m)=>{var f;m&&((f=[]).d=-1);var o=new Set,l=c.exports,n,v,R,I=new Promise((r,t)=>{R=t,v=r});I[E]=l,I[O]=r=>(f&&r(f),o.forEach(r),I.catch(t=>{})),c.exports=I,a(r=>{n=i(r);var t,s=()=>n.map(w=>{if(w[e])throw w[e];return w[E]}),N=new Promise(w=>{t=()=>w(s),t.r=0;var T=d=>d!==f&&!o.has(d)&&(o.add(d),d&&!d.d&&(t.r++,d.push(t)));n.map(d=>d[O](T))});return t.r?N:s()},r=>(r?R(I[e]=r):v(l),u(f))),f&&f.d<0&&(f.d=0)}})(),z.d=(O,E)=>{for(var e in E)z.o(E,e)&&!z.o(O,e)&&Object.defineProperty(O,e,{enumerable:!0,get:E[e]})},z.o=(O,E)=>Object.prototype.hasOwnProperty.call(O,E);var te=z(1753)})();})();
