// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/product-list-filters
// @version      0.6.73668928
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// ==/UserScript==

(()=>{(()=>{"use strict";var ee={9928:(O,h,e)=>{e.d(h,{S:()=>g,Sw:()=>C,d:()=>l,kU:()=>c,o5:()=>a});var u=e(4921),s=e(573);function c(p,f,m){const S=d(p,"text",f);return S.value=m,S}function a(p,f,m,S,I,r){const n=d(p,"number",f);return n.value=m,n.step=S,n.min=I,n.max=r,n}function g(p,f,m){const S=d(p,"checkbox",f);return S.checked=m,S}function d(p={},f=null,m=null){const S=E("input",p);return f&&(S.type=f),m&&(S.addEventListener("keyup",(0,u.sg)(m,200)),S.addEventListener("change",(0,u.sg)(m,100))),S}function i(p={},f=null){return E("span",p,f)}function l(p={},f=null,m=null){const S=E("a",p,f);return m&&(S.href=m),S}function o(p={},f=null,m=null){const S=E("button",p,f);return m&&(S.onclick=m),S}function C(p={},f=null){return E("div",p,f)}function E(p,f,m=null){if(typeof f!="object"||f===null)throw new TypeError("styles should be an object");const S=document.createElement(p);return(0,s.ZM)(S,f),m&&(S.innerHTML=m),S}},573:(O,h,e)=>{e.d(h,{Fi:()=>c,YA:()=>i,ZM:()=>f,fI:()=>a});var u=e(4214);function s(I,r=document){return!!r.querySelector(I)}function c(I,r=document,n=!1){const t=r.querySelector(I);return n&&!t&&console.log(`No element found for selector: ${I}`),t}function a(I,r=document,n=!1){const t=r.querySelectorAll(I);return n&&!t.length&&console.log(`No elements found for selector: ${I}`),t}function g(I,r,n){return[...I.querySelectorAll(r)].find(t=>t.textContent.trim().includes(n))}function d(I,r,n=!1,t=!1){const v=c(r,I,!0);return i(v,n,t)}function i(I,r=!1,n=!1,t=null){if(!I)return t===null?(console.log("No element found"),null):t;const v=I.innerText;return C(v,r,n)}function l(I,r,n=!1){const t=I[r];return i(t,n)}function o(I,r=!1,n=!1){const t=I.textContent;return C(t,r,n)}function C(I,r,n){return r&&(I=(0,u.zr)(I)),n&&(I=I.replace(",",".")),+I}function E(I){return[...I.childNodes].find(r=>r.nodeType===Node.TEXT_NODE)}function p(I){const r=n=>n.nodeType===Node.TEXT_NODE&&n.textContent.trim()!==""?[n]:[...n.childNodes].flatMap(r);return r(I)}function f(I,r){Object.assign(I.style,r)}function m(I){return Object.entries(I).map(([r,n])=>`${r.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${n};`).join(" ")}function S(I){return I?I.split(";").filter(r=>r.trim()!=="").reduce((r,n)=>{const[t,v]=n.split(":").map(_=>_.trim()),T=t.replace(/-([a-z])/g,(_,b)=>b.toUpperCase());return r[T]=v,r},{}):{}}},5539:(O,h,e)=>{e.d(h,{Bt:()=>s,UC:()=>g,WH:()=>u,kl:()=>a});function u(r,n){r.parentNode.insertBefore(n,r.nextSibling)}function s(r){o(r),i(r,"none")}function c(r){r.intersectionObserver||runOnceOnIntersection(r,()=>s(r))}function a(r){const n=l(r);i(r,n)}function g(r,n){n?s(r):a(r)}function d(r,n){n?c(r):(clearIntersectionObserver(r),a(r))}function i(r,n){r.style.display=n}function l(r){return o(r),r.defaultDisplay}function o(r){if(r.defaultDisplay)return;const{display:n}=getComputedStyle(r);r.defaultDisplay=n}function C(r,n,t=.3){n?p(r,t):E(r)}function E(r){r.style.opacity=""}function p(r,n=.3){r.style.opacity=n}function f(r){r.style.order=""}function m(r,n){r.style.order=n}function S(r,n){r.style.background=n}function I(r,n="custom-global-style"){let t=document.getElementById(n);t||(t=document.createElement("style"),t.id=n,t.type="text/css",document.head.appendChild(t)),t.textContent=r}},4921:(O,h,e)=>{e.d(h,{sg:()=>c,xk:()=>u});async function u(d,i,l=null){const o=d.querySelector(i);return o?Promise.resolve(o):new Promise(C=>{const E=new MutationObserver(f);E.observe(d,{childList:!0,subtree:!0});let p=null;l&&(p=setTimeout(()=>{E.disconnect(),console.log(`No element found for selector: ${i}`),C(null)},l));function f(){const m=d.querySelector(i);m&&(p&&clearTimeout(p),E.disconnect(),C(m))}})}async function s(d,i){return d.querySelector(i)?new Promise(o=>{const C=new MutationObserver(E);C.observe(d,{childList:!0,subtree:!0});function E(){d.querySelector(i)||(C.disconnect(),o())}}):Promise.resolve()}function c(d,i=250){let l;return(...o)=>{clearTimeout(l),l=setTimeout(()=>d(...o),i)}}function a(d,i){const l=new IntersectionObserver(o=>{o.forEach(C=>{C.isIntersecting&&(i(),g(d))})});d.intersectionObserver=l,l.observe(d)}function g(d){d.intersectionObserver&&(d.intersectionObserver.disconnect(),d.intersectionObserver=null)}},3829:(O,h,e)=>{e.d(h,{Ay:()=>s,JE:()=>a,iG:()=>g});var u=e(8355);function s(i,l){return!c(i,l)}function c(i,l){if(!l.value)return!0;const o=i.toLowerCase(),C=(0,u.R)(l),E=[],p=[];return C.forEach(f=>{if(f.startsWith("!")){const m=f.substring(1);m&&p.push(m)}else E.push(f)}),E.every(f=>o.includes(f))&&p.every(f=>!o.includes(f))}function a(i,l){return l.value!=null&&i<l.value}function g(i,l){return l.value!=null&&i>l.value}function d(i,l){return l.value&&i!==l.value}},4521:(O,h,e)=>{e.d(h,{z:()=>s});var u=e(3048);function s(c,a=null){return{createGlobalFilter(g,d=null,i=c){return u.V.create(g,d,i)},createSectionFilter(g,d=null,i=c){if(!a)throw new Error("sectionId must be provided to use createSectionFilter.");return u.V.createWithCompositeKey(a,g,d,i)}}}},5884:(O,h,e)=>{e.d(h,{Hw:()=>a,Nm:()=>s,nW:()=>c});var u=e(9928);function s(g,d,i={},l={}){const o=(0,u.Sw)(i,g),C=(0,u.kU)(l,d.updateValueFromEvent,d.value);return o.append(C),o}function c(g,d,i,l,o,C={},E={}){const p=(0,u.Sw)(C,g),f=(0,u.o5)(E,d.updateValueFromEvent,d.value,i,l,o);return p.append(f),p}function a(g,d,i={},l={}){const o=(0,u.Sw)(i,g),C=(0,u.S)(l,d.updateValueFromEvent,d.value);return o.append(C),o}},7877:(O,h,e)=>{e.d(h,{E9:()=>s,FR:()=>a,HX:()=>c,X0:()=>g,pW:()=>r});var u=e(5884);function s(n,t={},v={}){return(0,u.Nm)("\u041F\u043E\u0438\u0441\u043A: ",n,t,v)}function c(n,t={},v={},T=.1,_=3){return(0,u.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",n,T,_,5,t,v)}function a(n,t={},v={},T=.1,_=3){return(0,u.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",n,T,_,5,t,v)}function g(n,t={},v={}){return i("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",n,t,v)}function d(n,t={},v={}){return i("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",n,t,v)}function i(n,t,v={},T={}){return(0,u.nW)(n,t,"1","1","999999",v,T)}function l(n,t={},v={}){return o("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",n,t,v)}function o(n,t,v={},T={}){return createNumberFilterControl(n,t,"5","0","100",v,T)}function C(n,t={},v={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",n,"5","0","100",t,v)}function E(n,t,v={},T={},_="250"){return createNumberFilterControl(n,t,_,"0","1000000",v,T)}function p(n,t={},v={},T="25"){return E("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",n,t,v,T)}function f(n,t={},v={},T="25"){return E("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",n,t,v,T)}function m(n,t,v={},T={}){return createNumberFilterControl(n,t,"1","0","99999",v,T)}function S(n,t={},v={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",n,t,v)}function I(n,t={},v={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",n,t,v)}function r(n,t={},v={}){return(0,u.Hw)("\u0412\u043A\u043B: ",n,t,v)}},8355:(O,h,e)=>{e.d(h,{R:()=>u,f:()=>s});function u(c){return c.value.toLowerCase().split(",").map(a=>a.trim()).filter(a=>a!=="")}function s(c){return u(c).filter(a=>!a.startsWith("!"))}},5213:(O,h,e)=>{e.d(h,{b:()=>c});var u=e(9928),s=e(573);function c(a,g,d=!1,i="customFiltersContainer"){let l=(0,s.Fi)(`#${i}`,a);if(l)if(d)l.remove();else return;l=(0,u.Sw)(),l.id=i,g(l,a)}},8200:(O,h,e)=>{e.d(h,{s:()=>u});function u(s){const{target:c}=s,{type:a}=c;switch(a){case"text":return`"${c.value}"`;case"number":return c.value;case"checkbox":return c.checked;default:return console.log(`Unknown input type: ${a}`),null}}},157:(O,h,e)=>{e.d(h,{Fg:()=>u,IC:()=>a,vx:()=>c});const u=window.GM_setValue,s=window.GM.setValue,c=window.GM_getValue,a=window.GM_addValueChangeListener},1870:(O,h,e)=>{e.d(h,{j:()=>u});class u{constructor(c,a){this.value=c,this.onChange=a}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(O,h,e)=>{e.d(h,{V:()=>g});var u=e(1870),s=e(8200),c=e(3976),a=e(157);class g extends u.j{constructor(i,l=null,o=null){super((0,a.vx)(i,l),o),this.storageKey=i,this.defaultValue=l}static create(i,l=null,o=null){return new g(i,l,o)}static createWithCompositeKey(i,l,o=null,C=null){const E=`${i}-${l}`;return new g(E,o,C)}updateValueFromEvent=i=>{const l=(0,s.s)(i),o=(0,c.$)(l);this.updateValue(o)};updateValue(i){this.value!==i&&((0,a.Fg)(this.storageKey,i),this.value=i,this.onChangeIfDefined())}clearValue(){this.updateValue(null)}resetValue(){this.updateValue(this.defaultValue)}}},3976:(O,h,e)=>{e.d(h,{$:()=>u});function u(s){return s===""?null:JSON.parse(s)}},4214:(O,h,e)=>{e.d(h,{$z:()=>u,zr:()=>s});function u(g){return g.replace(/\D/g,"")}function s(g){return g.replace(/[^\d.,-]/g,"")}function c(g){return g.replace(/\s/g,"")}function a(g){return g.charAt(0).toUpperCase()+g.slice(1)}},5406:(O,h,e)=>{e.d(h,{Fc:()=>u,bn:()=>s,oS:()=>d,z2:()=>C});function u(E,p="common",f=!1){const{pathname:m}=window.location;return s(m,E,p,f)}function s(E,p,f,m=!1){const I=E.split("/")[p]||f;return m&&console.log(`Pathname element: ${I}`),I}function c(E,p="common",f=!1){const m=u(E,"",f);return a(m,p,f)}function a(E,p,f){if(!E)return p;const m=E.split("-").at(-1);return f&&console.log(`Pathname element ending: ${m}`),m}function g(E,p,f="common",m=!1){const S=s(E,p,"",m);return a(S,f,m)}function d(E){const p=window.location.search;return i(p,E)}function i(E,p){return new URLSearchParams(E).get(p)}function l(E){return window.location.pathname.includes(E)}function o(E){return E.some(p=>l(p))}function C(E){return window.location.pathname.split("/").some(f=>f===E)}},2524:(O,h,e)=>{e.d(h,{d5:()=>c,vX:()=>i,ft:()=>a});var u=e(157);class s{constructor(C=Date.now(),E=[]){this.lastCheckDate=C,this.reviewsData=E}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(C){const{lastCheckDate:E,reviewsData:p}=C;return new s(E,p)}}const c={LAST_DOCTOR_UPDATE:"last-doctor-update"};function a(o,C){const E=g(o),p=(0,u.vx)(E),f=d(p);f.reviewsData=C,f.updateLastCheckDate(),(0,u.Fg)(E,f),(0,u.Fg)(c.LAST_DOCTOR_UPDATE,Date.now())}function g(o){return`doctor-${o}`}function d(o){return o?s.fromObject(o):new s}function i(o){return l(o)?.reviewsData??null}function l(o){const C=g(o);return(0,u.vx)(C)}},1753:(O,h,e)=>{e.a(O,async(u,s)=>{try{var c=e(573),a=e(7858),g=e(4231),d=e(5406),i=e(5072);const o=(0,c.Fi)(".appointments_page");o?(0,g.$)(o):(0,d.z2)("otzivi")?await(0,i.N)():(0,d.z2)("vrach")&&(0,a.O)(),s()}catch(l){s(l)}},1)},7653:(O,h,e)=>{e.d(h,{NI:()=>o,z1:()=>p,Np:()=>I,pR:()=>f,sp:()=>n,rd:()=>r});var u=e(9928),s=e(573);const c={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var a=e(8586),g=e(5406),d=e(4214);const i="additionalLinksAppended",l=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function o(t,v){v.classList.contains(i)||(l.forEach(T=>{C(t,v,T)}),v.classList.add(i))}function C(t,v,T){const _=E(t,T),b=(0,u.d)({},T,_),P=document.createElement("br");v.append(P,b)}function E(t,v){const T=`${t} ${v}`;return`https://www.google.com/search?q=${encodeURIComponent(T)}&btnI`}function p(){const t=(0,s.Fi)(c.DOCTOR_CARD_NAME,document,!0);if(!t)return;const v=t.innerText.trim(),T=(0,u.Sw)();T.style.textAlign="center",(0,s.Fi)(c.DOCTOR_INTRO_LEFT).append(T),o(v,T)}function f(t,v,T=!1){const _=(0,u.Sw)(a.r.REVIEWS_INFO);T&&(_.style.justifyContent="center"),_.classList.add("v-application");const b=(0,u.Sw)(a.r.REVIEWS_INFO_BLOCK);return b.style.height=T?"10px":"23px",b.append(_),t.slice(T?1:0).forEach(P=>{const{category:K,title:$,count:H,bgClassSuffix:W}=P,X=`${v}?rates_category=${K}`,G=T?H:`${$} ${H}`,k=(0,u.d)(a.r.REVIEW_INFO,G,X);k.classList=m(W),_.append(k),T&&S(k,$)}),b}function m(t){return`text-caption ui-kit-color-text px-2 py-1 rounded ui-kit-bg-bg-${t}`}function S(t,v){let T=null;t.addEventListener("mouseenter",()=>{T=(0,u.Sw)(a.r.REVIEW_INFO_TOOLTIP,v),document.body.appendChild(T);const _=t.getBoundingClientRect();T.style.left=`${_.right+window.scrollX-2}px`,T.style.top=`${_.top+window.scrollY-T.offsetHeight+3}px`}),t.addEventListener("mouseleave",()=>{T&&(T.remove(),T=null)})}function I(t){const v=(0,s.Fi)(c.NAME_SPAN_HOLDER,document,!0);if(!v)return;const T=(0,s.Fi)(c.NAME_SPAN,v,!0);T&&T.append(t)}function r(){const t=(0,g.Fc)(3,"unknown");return(0,d.$z)(t)}function n(t){const v=(0,g.bn)(t,5,"");return(0,d.$z)(v)}},8586:(O,h,e)=>{e.d(h,{r:()=>s});const u={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},s={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...u.INPUT,width:"195px"},NUMBER_INPUT:{...u.INPUT,width:"70px"},CHECKBOX_INPUT:{...u.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none"},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(O,h,e)=>{e.d(h,{$:()=>K});var u=e(5406),s=e(573),c=e(5539),a=e(3829),g=e(7653),d=e(5213),i=e(5884),l=e(7877);const o={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".doctor-filters",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .mr-2 .ui-text",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var C=e(4521),E=e(2524),p=e(4921),f=e(157),m=e(8586);const S=(0,u.Fc)(2),{createGlobalFilter:I,createSectionFilter:r}=(0,C.z)(W,S),n=r("spec-filter"),t=r("clinic-filter"),v=r("min-reviews-filter",10),T=r("min-experience-filter",5,j),_=r("max-experience-filter",40),b=I("filter-enabled",!0),P={doctorCardsCache:new WeakMap};function K(w){j(),$();const x=(0,s.Fi)(o.DOCTOR_FILTERS);(0,d.b)(x,H),W(),(0,f.IC)(E.d5.LAST_DOCTOR_UPDATE,W),new MutationObserver((0,p.sg)(W)).observe(w,{childList:!0})}function $(){const w=(0,s.Fi)(o.LIST_HEADER);w&&w.remove()}function H(w,x){(0,s.ZM)(w,m.r.FILTERS_CONTAINER),w.style.marginTop="6px";const B=(0,i.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",n,m.r.CONTROL,m.r.TEXT_INPUT),R=(0,i.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",t,m.r.CONTROL,m.r.TEXT_INPUT),N=(0,l.X0)(v,m.r.CONTROL,m.r.NUMBER_INPUT),D=(0,i.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",T,"1","0","100",m.r.CONTROL,m.r.NUMBER_INPUT),L=(0,i.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",_,"1","0","100",m.r.CONTROL,m.r.NUMBER_INPUT),F=(0,l.pW)(b,m.r.CONTROL,m.r.CHECKBOX_INPUT);w.append(B,R,N,D,L,F),x.append(w)}function W(){(0,s.fI)(o.DOCTOR_CARD).forEach(X)}function X(w){if(!b.value){(0,c.kl)(w);return}let x=P.doctorCardsCache.get(w);if(!x){const R=(0,s.Fi)(o.PROFILE_CARD,w),N=(0,s.Fi)(o.REVIEWS_LINK,R),D=(0,s.Fi)(o.EXPERIENCE_WRAP,w);if(!N||!D){(0,c.Bt)(w);return}const F=(0,s.Fi)(o.SPEC_WRAP,w,!0).innerText.trim(),y=(0,s.Fi)(o.CLINIC_CONTAINER,w,!0),M=(0,s.Fi)(o.CLINIC_WRAP,y,!0).innerText.trim(),U=(0,s.YA)(N,!0),z=(0,s.YA)(D,!0),q=G(N);N.href=q,(0,g.NI)(k(w),R),x={specInfo:F,clinicName:M,reviewsLinkNumber:U,experienceNumber:z,reviewsLink:N,reviewInfoAppended:!1},P.doctorCardsCache.set(w,x)}Q(x);const B=(0,a.Ay)(x.specInfo,n)||(0,a.Ay)(x.clinicName,t)||(0,a.JE)(x.reviewsLinkNumber,v)||(0,a.JE)(x.experienceNumber,T)||(0,a.iG)(x.experienceNumber,_);(0,c.UC)(w,B)}function G(w){return w.href.replace(/\/#otzivi$/,"/otzivi/")}function k(w){return(0,s.Fi)(o.DOCTOR_CARD_NAME,w,!0).innerText}function Q(w){if(w.reviewInfoAppended)return;const{reviewsLink:x}=w,B=x.href,R=(0,E.vX)((0,g.sp)(B));if(!R)return;const N=(0,g.pR)(R,B,!0);(0,c.WH)(x,N),w.reviewInfoAppended=!0}function j(){if(!T.value)return;const w=new URL(window.location.href);+w.searchParams.get("experience")!==T.value&&(w.searchParams.set("experience",T.value),window.location.href=w.toString())}},7858:(O,h,e)=>{e.d(h,{O:()=>d});var u=e(573),s=e(9928),c=e(7653);const a={DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var g=e(2524);function d(){(0,c.z1)(),l();const o=(0,g.vX)((0,c.rd)());if(!o)return;const C=(0,c.pR)(o,i());(0,c.Np)(C)}function i(){const{location:o}=window;return`${o.origin}${o.pathname}otzivi/`}function l(){if(!(0,u.Fi)(a.DOCTOR_CONTACTS))return;const C=[...(0,u.fI)(a.DOCTOR_DETAILS)].pop();if(!C)return;C.style.position="sticky",C.style.top="16px";const E=(0,s.Sw)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");E.classList.add("b-doctor-details__toc-title");const p=(0,s.d)({},null,"#doctor-contacts");p.classList.add("b-doctor-details__toc-item"),p.append(E),C.insertBefore(p,C.firstChild)}},5072:(O,h,e)=>{e.d(h,{N:()=>X});var u=e(7653);const s={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#rating"};var c=e(573),a=e(4921),g=e(5406),d=e(2524),i=e(4521),l=e(5213),o=e(8586),C=e(7877),E=e(5539);function p(R,N){R.forEach(D=>f(N,D))}function f(R,N){if(!N)return;const D=new RegExp(`(${N})`,"gi"),L=document.createTreeWalker(R,NodeFilter.SHOW_TEXT,null);let F=L.nextNode();const y=[];for(;F;){const{textContent:A}=F;if(D.test(A)){const M=document.createDocumentFragment();let U=0;A.replace(D,(z,q,J)=>{J>U&&M.appendChild(document.createTextNode(A.slice(U,J)));const Y=document.createElement("span");Y.className="highlightedSubstring",Y.style.backgroundColor="yellow",Y.textContent=z,M.appendChild(Y),U=J+z.length}),U<A.length&&M.appendChild(document.createTextNode(A.slice(U))),y.push({node:F,fragment:M})}F=L.nextNode()}y.forEach(({node:A,fragment:M})=>{A.parentNode.replaceChild(M,A)})}function m(R){(0,c.fI)(".highlightedSubstring",R).forEach(D=>{const{parentNode:L}=D;D.replaceWith(D.textContent),L.normalize()})}var S=e(8355);function I(R,N){const D=(0,S.f)(R);p(D,N)}function r(R,N){const D=getIncludedSearchStrings(R);N.forEach(L=>highlightSubstrings(D,L))}var n=e(3829),t=e(9928);function v(R={}){return(0,t.Sw)(R,"|")}function T(R={},N=75,D="customFiltersContainer"){const L=document.getElementById(D);if(!L)return console.log(`Element with id="${D}" not found.`),null;const F=createButton(R,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return F.addEventListener("mouseover",()=>{F.style.filter="brightness(0.9)"}),F.addEventListener("mouseout",()=>{F.style.filter="brightness(1)"}),F.addEventListener("click",()=>{const y=L.getBoundingClientRect();window.scrollTo({top:y.top+window.scrollY-N})}),new IntersectionObserver(([y])=>{F.style.display=y.isIntersecting?"none":"flex"},{threshold:.5}).observe(L),F}function _(R,N={}){const D=T(N);D&&R.appendChild(D)}const{createGlobalFilter:b}=(0,i.z)(k),P=b("reviews-text-filter"),K=b("reviews-min-rating-filter"),$=b("reviews-max-rating-filter"),H=b("reviews-filter-enabled",!0),W={reviewCardsCache:new Map};async function X(){(0,u.z1)();const R=await(0,a.xk)(document,s.CONTROLS_CONTAINER);(0,l.b)(R,G),k();const N=await j();(0,d.ft)((0,u.rd)(),N);const D=(0,u.pR)(N,x());(0,u.Np)(D),(0,g.oS)("rates_category")&&B()}function G(R,N){(0,c.ZM)(R,o.r.FILTERS_CONTAINER),R.style.marginTop="12px";const D=(0,C.E9)(P,o.r.CONTROL,o.r.TEXT_INPUT),L=(0,C.HX)(K,o.r.CONTROL,o.r.NUMBER_INPUT,1,1),F=(0,C.FR)($,o.r.CONTROL,o.r.NUMBER_INPUT,1,1),y=v(o.r.CONTROL),A=(0,C.pW)(H,o.r.CONTROL,o.r.CHECKBOX_INPUT);R.append(D,L,F,y,A),N.append(R)}function k(){(0,c.fI)(s.REVIEWS).forEach(Q)}function Q(R){if(!H.value){(0,E.kl)(R);return}m(R);let N=W.reviewCardsCache.get(R);if(!N){const L=(0,c.Fi)(s.REVIEW_TEXT_WRAP,R),F=(0,c.Fi)(s.REVIEW_RATING_WRAP,R);if(!L||!F){(0,E.Bt)(R);return}N={reviewTextWrap:L,reviewText:L.innerText,rating:(0,c.YA)(F)},W.reviewCardsCache.set(R,N)}P.value&&I(P,N.reviewTextWrap);const D=(0,n.Ay)(N.reviewText,P)||(0,n.JE)(N.rating,K)||(0,n.iG)(N.rating,$);(0,E.UC)(R,D)}async function j(){const R=(0,c.Fi)(s.FILTER_CHIP);R.click();const N=await(0,a.xk)(document,s.FILTER_LIST),D=[...(0,c.fI)(s.FILTER_LIST_ITEM,N)].map(L=>{const F=L.getAttribute("data-qa");if(!F)return null;const y=F.replace("reviews_filter_list_item_",""),A=(0,c.Fi)(s.FILTER_TITLE_WRAP,L).textContent.trim(),M=(0,c.Fi)(s.FILTER_COUNT_WRAP,L),U=(0,c.YA)(M,!0),z=w(M.classList);return{category:y,title:A,count:U,bgClassSuffix:z}});return R.click(),D}function w(R){const N=R.value.match(/ui-kit-bg-bg-(\w+)/);return N?N[1]:null}function x(){const{location:R}=window;return`${R.origin}${R.pathname}`}function B(){(0,c.Fi)(s.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},Z={};function V(O){var h=Z[O];if(h!==void 0)return h.exports;var e=Z[O]={exports:{}};return ee[O](e,e.exports,V),e.exports}(()=>{var O=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",h=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",u=c=>{c&&c.d<1&&(c.d=1,c.forEach(a=>a.r--),c.forEach(a=>a.r--?a.r++:a()))},s=c=>c.map(a=>{if(a!==null&&typeof a=="object"){if(a[O])return a;if(a.then){var g=[];g.d=0,a.then(l=>{d[h]=l,u(g)},l=>{d[e]=l,u(g)});var d={};return d[O]=l=>l(g),d}}var i={};return i[O]=l=>{},i[h]=a,i});V.a=(c,a,g)=>{var d;g&&((d=[]).d=-1);var i=new Set,l=c.exports,o,C,E,p=new Promise((f,m)=>{E=m,C=f});p[h]=l,p[O]=f=>(d&&f(d),i.forEach(f),p.catch(m=>{})),c.exports=p,a(f=>{o=s(f);var m,S=()=>o.map(r=>{if(r[e])throw r[e];return r[h]}),I=new Promise(r=>{m=()=>r(S),m.r=0;var n=t=>t!==d&&!i.has(t)&&(i.add(t),t&&!t.d&&(m.r++,t.push(m)));o.map(t=>t[O](n))});return m.r?I:S()},f=>(f?E(p[e]=f):C(l),u(d))),d&&d.d<0&&(d.d=0)}})(),V.d=(O,h)=>{for(var e in h)V.o(h,e)&&!V.o(O,e)&&Object.defineProperty(O,e,{enumerable:!0,get:h[e]})},V.o=(O,h)=>Object.prototype.hasOwnProperty.call(O,h);var te=V(1753)})();})();
