// ==UserScript==
// @name         Pepper product cards filter
// @description  Hide product cards by filter
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.pepper.ru/*
// @namespace    https://github.com/reliable-code/product-list-filters
// @version      1.0.73938975
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pepper.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/product-list-filters/main/dist/pepper.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={5467:(w,c,n)=>{n.d(c,{E2:()=>b});var s=n(9928);function b(g,i={},t=null){const r=(0,s.Sw)(i,t);return r.append(g),r}function p(g,i=null,t={},r={}){const v=createActionLink(g,i,r);return b(v,t)}function a(g,i=null,t=null,r={},v={}){const S=createActionLinkWithIcon(g,t,i,v);return b(S,r)}},9928:(w,c,n)=>{n.d(c,{S:()=>g,Sw:()=>x,kU:()=>p,o5:()=>a});var s=n(4921),b=n(5539);function p(l,u,N){const h=i(l,"text",u);return h.value=N,h}function a(l,u,N,h,D,C){const f=i(l,"number",u);return f.value=N,f.step=h,f.min=D,f.max=C,f}function g(l,u,N){const h=i(l,"checkbox",u);return h.checked=N,h}function i(l={},u=null,N=null){const h=m("input",l);return u&&(h.type=u),N&&(h.addEventListener("keyup",(0,s.sg)(N,200)),h.addEventListener("change",(0,s.sg)(N,100))),h}function t(l={},u=null){return m("span",l,u)}function r(l={},u=null,N=null){const h=m("a",l,u);return N&&(h.href=N),h}function v(l,u=null,N={}){N.cursor||="pointer";const h=r(N,u);return l&&h.addEventListener("click",l),h}function S(l,u,N=null,h={},D={}){h.display||="inline-flex",h.alignItems||="center",h.gap||="0.25em";const C=v(l,N,h);return C.prepend(d(u,D)),C}function F(l={},u=null,N=null){const h=m("button",l,u);return N&&h.addEventListener("click",N),h}function x(l={},u=null){return m("div",l,u)}function T(l={}){return m("i",l)}function d(l,u={}){u.width||="1em",u.height||="1em",u.paddingBottom||="1px";const N=T(u);return N.setAttribute("data-lucide",l),N}function m(l,u,N=null){if(typeof u!="object"||u===null)throw new TypeError("styles should be an object");const h=document.createElement(l);return(0,b.ZM)(h,u),N&&(h.innerHTML=N),h}},573:(w,c,n)=>{n.d(c,{Fi:()=>p,YA:()=>t,fI:()=>a});var s=n(4214);function b(d,m=document){return!!m.querySelector(d)}function p(d,m=document,l=!1){const u=m.querySelector(d);return l&&!u&&console.log(`No element found for selector: ${d}`),u}function a(d,m=document,l=!1){const u=m.querySelectorAll(d);return l&&!u.length&&console.log(`No elements found for selector: ${d}`),u}function g(d,m,l){return[...d.querySelectorAll(m)].find(u=>u.textContent.trim().includes(l))}function i(d,m,l=!1,u=!1){const N=p(m,d,!0);return t(N,l,u)}function t(d,m=!1,l=!1,u=null){if(!d)return u===null?(console.log("No element found"),null):u;const N=d.innerText;return S(N,m,l)}function r(d,m,l=!1){const u=d[m];return t(u,l)}function v(d,m=!1,l=!1){const u=d.textContent;return S(u,m,l)}function S(d,m,l){m&&(d=(0,s.zr)(d)),l&&(d=d.replace(",","."));const u=Number(d);return Number.isNaN(u)?(console.log(`Invalid number: ${d}`),0):u}function F(d){return[...d.childNodes].find(m=>m.nodeType===Node.TEXT_NODE)}function x(d){const m=l=>l.nodeType===Node.TEXT_NODE&&l.textContent.trim()!==""?[l]:[...l.childNodes].flatMap(m);return m(d)}function T(d){return normalizeSpacing(d.textContent)}},5539:(w,c,n)=>{n.d(c,{D9:()=>d,ZM:()=>R,iV:()=>l,vJ:()=>m});function s(e,o){e.parentNode.insertBefore(o,e.nextSibling)}function b(e){e.style.display="none"}function p(e){S(e),b(e)}function a(e){e.intersectionObserver||runOnceOnIntersection(e,()=>b(e))}function g(e){e.style.display=""}function i(e){const o=v(e);e.style.display=o}function t(e,o){o?b(e):g(e)}function r(e,o){o?a(e):(clearIntersectionObserver(e),g(e))}function v(e){return S(e),e.defaultDisplay}function S(e){if(e.defaultDisplay)return;const{display:o}=getComputedStyle(e);e.defaultDisplay=o}function F(){return{show:[],hide:[]}}function x(e,o,y){e?o.hide.push(y):o.show.push(y)}function T(e){e.show.forEach(g),e.hide.forEach(b)}function d(e,o,y=.3){o?l(e,y):m(e)}function m(e){e.style.opacity=""}function l(e,o=.3){e.style.opacity=o}function u(e){e.style.order=""}function N(e,o){e.style.order=o}function h(e,o){e.style.background=o}function D(e,o){const y=getFirstElement(o);if(!y)return;const k=createLink();k.href=e,y.parentNode.append(k),k.append(y)}function C(e,o){const y=getFirstElement(o);y&&f(e,y)}function f(e,o){const y=createLink();y.href=e,y.append(...o.childNodes),o.append(y)}function E(){const e=getURLQueryParam("scrollTo");if(!e)return;const o=document.getElementById(e);o?o.scrollIntoView():console.log(`Element with ID "${e}" was not found.`)}function I(e,o="custom-global-style"){let y=document.getElementById(o);y||(y=document.createElement("style"),y.id=o,y.type="text/css",document.head.appendChild(y)),y.textContent=e}function R(e,o){Object.assign(e.style,o)}function B(e){return Object.entries(e).map(([o,y])=>`${o.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${y};`).join(" ")}function $(e){return e?e.split(";").filter(o=>o.trim()!=="").reduce((o,y)=>{const[k,L]=y.split(":").map(P=>P.trim()),A=k.replace(/-([a-z])/g,(P,U)=>U.toUpperCase());return o[A]=L,o},{}):{}}function G(e,o,y="text/plain"){const k=new Blob([e],{type:y}),L=URL.createObjectURL(k),A=document.createElement("a");A.href=L,A.download=o,document.body.appendChild(A),A.click(),document.body.removeChild(A),requestAnimationFrame(()=>URL.revokeObjectURL(L))}},4921:(w,c,n)=>{n.d(c,{sg:()=>a,xk:()=>s});function s(t,r,v=null){const S=t.querySelector(r);return S?Promise.resolve(S):new Promise(F=>{const x=new MutationObserver(d);x.observe(t,{childList:!0,subtree:!0});let T;v&&(T=setTimeout(()=>{x.disconnect(),console.log(`No element found for selector: ${r}`),F(null)},v));function d(){const m=t.querySelector(r);m&&(T&&clearTimeout(T),x.disconnect(),F(m))}})}function b(t,r){return t.querySelector(r)?new Promise(S=>{const F=new MutationObserver(x);F.observe(t,{childList:!0,subtree:!0});function x(){t.querySelector(r)||(F.disconnect(),S())}}):Promise.resolve()}function p(t,r=400){return new Promise(v=>{let S;const F=new MutationObserver(()=>{clearTimeout(S),x()});function x(){S=setTimeout(()=>{F.disconnect(),v()},r)}x(),F.observe(t,{childList:!0,subtree:!0})})}function a(t,r=250){let v;return(...S)=>{clearTimeout(v),v=setTimeout(()=>t(...S),r)}}function g(t,r){const v=new IntersectionObserver(S=>{S.forEach(F=>{F.isIntersecting&&(r(),i(t))})});t.intersectionObserver=v,v.observe(t)}function i(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}},3829:(w,c,n)=>{n.d(c,{Ay:()=>b,JE:()=>a});var s=n(8355);function b(t,r){return!p(t,r)}function p(t,r){if(!r.value)return!0;const v=t.toLowerCase(),S=(0,s.R)(r),F=[],x=[];return S.forEach(T=>{if(T.startsWith("!")){const d=T.substring(1);d&&x.push(d)}else F.push(T)}),F.every(T=>v.includes(T))&&x.every(T=>!v.includes(T))}function a(t,r){return r.value!=null&&t<r.value}function g(t,r){return r.value!=null&&t>r.value}function i(t,r){return r.value&&t!==r.value}},4521:(w,c,n)=>{n.d(c,{z:()=>b});var s=n(3048);function b(p,a=null){return{createGlobalFilter(g,i=null,t=p){return s.V.create(g,i,t)},createSectionFilter(g,i=null,t=p){if(!a)throw new Error("sectionId must be provided to use createSectionFilter.");return s.V.createWithCompositeKey(a,g,i,t)}}}},5884:(w,c,n)=>{n.d(c,{Hw:()=>g,Nm:()=>p,nW:()=>a});var s=n(9928),b=n(5467);function p(i,t,r={},v={}){const S=(0,s.kU)(v,t.updateValueFromEvent,t.value);return(0,b.E2)(S,r,i)}function a(i,t,r,v,S,F={},x={}){const T=(0,s.o5)(x,t.updateValueFromEvent,t.value,r,v,S);return(0,b.E2)(T,F,i)}function g(i,t,r={},v={}){const S=(0,s.S)(v,t.updateValueFromEvent,t.value);return(0,b.E2)(S,r,i)}},7877:(w,c,n)=>{n.d(c,{E9:()=>b,pW:()=>D});var s=n(5884);function b(C,f={},E={}){return(0,s.Nm)("\u041F\u043E\u0438\u0441\u043A: ",C,f,E)}function p(C,f={},E={},I=.1,R=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,I,R,5,f,E)}function a(C,f={},E={},I=.1,R=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,I,R,5,f,E)}function g(C,f={},E={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,f,E)}function i(C,f={},E={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,f,E)}function t(C,f,E={},I={}){return createNumberFilterControl(C,f,"1","1","999999",E,I)}function r(C,f={},E={}){return v("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",C,f,E)}function v(C,f,E={},I={}){return createNumberFilterControl(C,f,"5","0","100",E,I)}function S(C,f={},E={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",C,"5","0","100",f,E)}function F(C,f,E={},I={},R="250"){return createNumberFilterControl(C,f,R,"0","1000000",E,I)}function x(C,f={},E={},I="25"){return F("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",C,f,E,I)}function T(C,f={},E={},I="25"){return F("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",C,f,E,I)}function d(C,f={},E={}){return m("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",C,f,E)}function m(C,f,E={},I={}){return createNumberFilterControl(C,f,"1","0","99999",E,I)}function l(C,f={},E={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",C,"1","2","7",f,E)}function u(C,f={},E={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",C,f,E)}function N(C,f={},E={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",C,f,E)}function h(C,f={},E={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",C,f,E)}function D(C,f={},E={}){return(0,s.Hw)("\u0412\u043A\u043B: ",C,f,E)}},8355:(w,c,n)=>{n.d(c,{R:()=>s});function s(p){return p.value.toLowerCase().split(",").map(a=>a.trim()).filter(a=>a!=="")}function b(p){return s(p).filter(a=>!a.startsWith("!"))}},5213:(w,c,n)=>{n.d(c,{b:()=>p});var s=n(9928),b=n(573);function p(a,g,i=!1,t="customFiltersContainer"){let r=(0,b.Fi)(`#${t}`,a);if(r)if(i)r.remove();else return;r=(0,s.Sw)(),r.id=t,g(r,a)}},8200:(w,c,n)=>{n.d(c,{s:()=>s});function s(b){const{target:p}=b,{type:a}=p;switch(a){case"text":return`"${p.value}"`;case"number":return p.value;case"checkbox":return p.checked;default:return console.log(`Unknown input type: ${a}`),null}}},157:(w,c,n)=>{n.d(c,{Fg:()=>s,vx:()=>p});const s=window.GM_setValue,b=window.GM.setValue,p=window.GM_getValue,a=window.GM_addValueChangeListener},1870:(w,c,n)=>{n.d(c,{j:()=>s});class s{constructor(p,a){this.value=p,this.onChange=a}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(w,c,n)=>{n.d(c,{V:()=>g});var s=n(1870),b=n(8200),p=n(3976),a=n(157);class g extends s.j{constructor(t,r=null,v=null){super((0,a.vx)(t,r),v),this.storageKey=t,this.defaultValue=r}static create(t,r=null,v=null){return new g(t,r,v)}static createWithCompositeKey(t,r,v=null,S=null){const F=`${t}-${r}`;return new g(F,v,S)}updateValueFromEvent=t=>{const r=(0,b.s)(t),v=(0,p.$)(r);this.updateValue(v)};updateValue(t,r=!0){this.value!==t&&((0,a.Fg)(this.storageKey,t),this.value=t,r&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(w,c,n)=>{n.d(c,{$:()=>s});function s(b){return b===""?null:JSON.parse(b)}},4214:(w,c,n)=>{n.d(c,{zr:()=>b});function s(i){return i.replace(/\D/g,"")}function b(i){return i.replace(/[^\d.,-]/g,"")}function p(i){return i.replace(/\s/g,"")}function a(i){return i.charAt(0).toUpperCase()+i.slice(1)}function g(i){return i.replace(/\s+/g," ").trim()}},1365:(w,c,n)=>{n.d(c,{i:()=>s});const s={MARK_AS_NEWEST_SEEN_APPENDED:"markAsNewestSeenAppended"}},7234:(w,c,n)=>{n.d(c,{CU:()=>p,Fr:()=>g,Su:()=>b,X0:()=>a});var s=n(157);function b(i){(0,s.Fg)("newest-seen-product-id",i)}function p(){return(0,s.vx)("newest-seen-product-id")}function a(i){(0,s.Fg)("prev-newest-seen-product-id",i)}function g(){return(0,s.vx)("prev-newest-seen-product-id")}},9374:(w,c,n)=>{n.a(w,async(s,b)=>{try{let D=function(){const e=(0,r.fI)(F.Z.PRODUCT_CARD);if(e.length){const o=e[0].parentElement;(0,a.b)(o,C),f(),new MutationObserver(f).observe(o,{childList:!0,subtree:!0})}},C=function(e,o){(0,t.ZM)(e,x.r.FILTERS_CONTAINER);const y=(0,v.E9)(l,x.r.CONTROL,x.r.TEXT_INPUT),k=(0,i.nW)("\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u043E \u0433\u043E\u043B\u043E\u0441\u043E\u0432: ",u,"50","0","10000",x.r.CONTROL,x.r.NUMBER_INPUT),L=(0,i.Hw)("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D\u043D\u044B\u0435: ",N,x.r.CONTROL,x.r.CHECKBOX_INPUT),A=(0,v.pW)(h,x.r.CONTROL,x.r.CHECKBOX_INPUT);e.append(y,k,L,A),o.prepend(e)},f=function(){(0,r.fI)(F.Z.PRODUCT_CARD).forEach(E)},E=function(e){const o=(0,r.Fi)(F.Z.PRODUCT_CARD_LINK,e),y=I(o);if(R(y,e),B(e,o,y),!h.value){(0,t.vJ)(e);return}if(e.classList.contains("expired-view")&&!N.value){(0,t.iV)(e);return}const L=(0,r.Fi)(F.Z.PRODUCT_CARD_RATING,e);if(L.innerText.includes("\u041D\u043E\u0432\u043E\u0435"))return;const A=(0,r.Fi)(F.Z.PRODUCT_NAME,e),P=(0,r.YA)(L,!0),U=A.innerText,z=(0,g.Ay)(U,l)||(0,g.JE)(P,u);(0,t.D9)(e,z)},I=function(e){return+e.getAttribute("href").split("-").pop()},R=function(e,o){e>(0,T.Fr)()?o.style.border="3px solid #8ab854":o.style.removeProperty("border")},B=function(e,o,y){e.hasAttribute(d.i.MARK_AS_NEWEST_SEEN_APPENDED)||(e.addEventListener("mousedown",k=>{k.button===1&&k.target!==o&&confirm("\u041F\u043E\u043C\u0435\u0442\u0438\u0442\u044C \u043A\u0430\u043A \u043D\u043E\u0432\u043E\u0435?")&&($(y),k.preventDefault())}),e.setAttribute(d.i.MARK_AS_NEWEST_SEEN_APPENDED,""))},$=function(e){const o=(0,T.CU)();(0,T.X0)(o),(0,T.Su)(e),f()};var p=n(4921),a=n(5213),g=n(3829),i=n(5884),t=n(5539),r=n(573),v=n(7877),S=n(4521),F=n(2756),x=n(8050),T=n(7234),d=n(1365);const{createGlobalFilter:m}=(0,S.z)(D),l=m("name-filter"),u=m("min-votes-filter",50),N=m("show-expired-filter",!1),h=m("filter-enabled",!0);await G(),D();async function G(){const e=await(0,p.xk)(document,F.Z.DISCUSSIONS);e&&(e.style.position="sticky",e.style.top="0")}b()}catch(m){b(m)}},1)},2756:(w,c,n)=>{n.d(c,{Z:()=>s});const s={DISCUSSIONS:"div.md\\:block.hidden.common-box:nth-of-type(3)",PRODUCT_CARD:".deal-card",PRODUCT_CARD_RATING:".common-box span",PRODUCT_NAME:".custom-card-title",PRODUCT_CARD_LINK:".custom-card-title > a"}},8050:(w,c,n)=>{n.d(c,{r:()=>b});const s={INPUT:{border:"1px solid #d1d5db",borderRadius:"8px",marginLeft:"7px"}},b={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",padding:"11px 19px",marginBottom:".5rem",backgroundColor:"#fff",borderWidth:"1px",borderColor:"rgb(229, 229, 229)",borderRadius:"10px",position:"sticky",zIndex:"11",top:"-1px"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...s.INPUT,width:"180px",padding:"7px 14px",backgroundColor:"#fff"},NUMBER_INPUT:{...s.INPUT,width:"90px",padding:"7px 14px",backgroundColor:"#fff"},CHECKBOX_INPUT:{...s.INPUT,width:"24px",height:"24px"}}}},V={};function O(w){var c=V[w];if(c!==void 0)return c.exports;var n=V[w]={exports:{}};return j[w](n,n.exports,O),n.exports}(()=>{var w=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",c=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",s=p=>{p&&p.d<1&&(p.d=1,p.forEach(a=>a.r--),p.forEach(a=>a.r--?a.r++:a()))},b=p=>p.map(a=>{if(a!==null&&typeof a=="object"){if(a[w])return a;if(a.then){var g=[];g.d=0,a.then(r=>{i[c]=r,s(g)},r=>{i[n]=r,s(g)});var i={};return i[w]=r=>r(g),i}}var t={};return t[w]=r=>{},t[c]=a,t});O.a=(p,a,g)=>{var i;g&&((i=[]).d=-1);var t=new Set,r=p.exports,v,S,F,x=new Promise((T,d)=>{F=d,S=T});x[c]=r,x[w]=T=>(i&&T(i),t.forEach(T),x.catch(d=>{})),p.exports=x,a(T=>{v=b(T);var d,m=()=>v.map(u=>{if(u[n])throw u[n];return u[c]}),l=new Promise(u=>{d=()=>u(m),d.r=0;var N=h=>h!==i&&!t.has(h)&&(t.add(h),h&&!h.d&&(d.r++,h.push(d)));v.map(h=>h[w](N))});return d.r?l:m()},T=>(T?F(x[n]=T):S(r),s(i))),i&&i.d<0&&(i.d=0)}})(),O.d=(w,c)=>{for(var n in c)O.o(c,n)&&!O.o(w,n)&&Object.defineProperty(w,n,{enumerable:!0,get:c[n]})},O.o=(w,c)=>Object.prototype.hasOwnProperty.call(w,c);var H=O(9374)})();})();
