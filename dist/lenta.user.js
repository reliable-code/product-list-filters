// ==UserScript==
// @name         Lenta List Clean
// @description  Remove product cards by filter
// @match        https://*.online.lenta.com/*
// @namespace    https://github.com/reliable-code/product-list-filters
// @version      0.3.73247566
// @icon         https://www.google.com/s2/favicons?sz=64&domain=lenta.com
// @author       reliable-code
// ==/UserScript==

(()=>{(()=>{"use strict";var rn={};function m(e){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},m(e)}function te(e,n){if(m(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,n||"default");if(m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function _(e){var n=te(e,"string");return m(n)=="symbol"?n:n+""}function P(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function T(e,n,t){return n&&P(e.prototype,n),t&&P(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function F(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function re(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,n){if(n&&(m(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},p(e)}function S(e,n){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},S(e,n)}function ae(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&S(e,n)}function O(e,n,t){return(n=_(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ie=T(function e(n,t){var r=this;F(this,e),O(this,"onChangeIfDefined",function(){r.onChange&&r.onChange()}),this.value=n,this.onChange=t});function le(e){var n=e.target,t=n.type;switch(t){case"text":return'"'.concat(n.value,'"');case"number":return n.value;case"checkbox":return n.checked;default:return console.log("Unknown input type: ".concat(t)),null}}function R(e){return e===""?null:JSON.parse(e)}function oe(e,n,t){return n=p(n),ue(e,N()?Reflect.construct(n,t||[],p(e).constructor):n.apply(e,t))}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N=function(){return!!e})()}var L=localStorage;function se(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=L.getItem(e);return t===null?n:R(t)}var f=function(e){function n(t){var r,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return F(this,n),r=oe(this,n,[se(t,u),a]),O(r,"updateValueFromEvent",function(i){var l=le(i),o=R(l);r.value!==o&&(L.setItem(r.storageKey,l),r.value=o,r.onChangeIfDefined())}),r.storageKey=t,r}return ae(n,e),T(n)}(ie);function un(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return new Promise(function(r){var u=e.querySelector(n);if(u){r(u);return}var a=new MutationObserver(l);a.observe(e,{childList:!0,subtree:!0});var i=null;t&&(i=setTimeout(function(){a.disconnect(),console.log("No element found for selector: ".concat(n)),r(null)},t));function l(){e.querySelector(n)&&(i&&clearTimeout(i),a.disconnect(),r(e.querySelector(n)))}})}function D(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,t;return function(){for(var r=arguments.length,u=new Array(r),a=0;a<r;a++)u[a]=arguments[a];clearTimeout(t),t=setTimeout(function(){return e.apply(void 0,u)},n)}}function ce(e){if(Array.isArray(e))return e}function ge(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r,u,a,i,l=[],o=!0,c=!1;try{if(a=(t=t.call(e)).next,n===0){if(Object(t)!==t)return;o=!1}else for(;!(o=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);o=!0);}catch(v){c=!0,u=v}finally{try{if(!o&&t.return!=null&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw u}}return l}}function k(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function me(e,n){if(e){if(typeof e=="string")return k(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?k(e,n):void 0}}function fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(e,n){return ce(e)||ge(e,n)||me(e,n)||fe()}function ve(e){return e.replace(/\D/g,"")}function pe(e){return e.replace(/[^\d.,-]/g,"")}function an(e){return e.replace(/\s/g,"")}function ln(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=n.querySelector(e);return t&&!r&&console.log("No element found for selector: ".concat(e)),r}function C(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=n.querySelectorAll(e);return t&&!r.length&&console.log("No elements found for selector: ".concat(e)),r}function on(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=s(n,e,!0),a=h(u,t,r);return a}function h(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!e)if(r===null)console.log("No element found");else return r;var u=e.innerText;return j(u,n,t)}function sn(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e[n],u=h(r,t);return u}function cn(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.textContent;return j(r,n,t)}function j(e,n,t){n&&(e=pe(e)),t&&(e=e.replace(",","."));var r=+e;return r}function he(e,n){Object.entries(n).forEach(function(t){var r=de(t,2),u=r[0],a=r[1];e.style[u]=a})}function ye(e,n,t){var r=E("text",e,n);return r.value=t,r}function be(e,n,t,r,u,a){var i=E("number",e,n);return i.value=t,i.step=r,i.min=u,i.max=a,i}function Se(e,n,t){var r=E("checkbox",e,n);return r.checked=t,r}function E(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=document.createElement("input");return e&&(r.type=e),n&&(r.addEventListener("keyup",D(n,200)),r.addEventListener("change",D(n,100))),t&&(r.style=t),r}function gn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return y("span",e,n)}function mn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=y("a",e,n);return t&&(r.href=t),r}function fn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=y("button",e,n);return t&&(r.onclick=t),r}function w(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=document.createElement("div");return e&&(t.textContent=e),n&&(t.style=n),t}function Ce(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return y("div",e,n)}function y(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=document.createElement(e);return Object.keys(n).length>0&&he(r,n),t&&(r.innerHTML=t),r}function Ee(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"customFiltersContainer",u=s("#".concat(r),e);if(u)if(t)u.remove();else return;u=Ce(),u.id=r,n(u,e)}function we(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"common",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=window.location.pathname;return I(r,e,n,t)}function I(e,n,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=e.split("/"),a=u[n]||t;return r&&console.log("Pathname element: ".concat(a)),a}function Ie(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"common",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=we(e,"",t);return M(r,n,t)}function M(e,n,t){if(!e)return n;var r=e.split("-").at(-1);return t&&console.log("Pathname element ending: ".concat(r)),r}function dn(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"common",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=I(e,n,"",r);return M(u,t,r)}function vn(e){var n=window.location.search;return xe(n,e)}function xe(e,n){var t=new URLSearchParams(e);return t.get(n)}function V(e){return window.location.pathname.includes(e)}function pn(e){var n=window.location.pathname.split("/");return n.some(function(t){return t===e})}function Ae(e,n){return!_e(e,n)}function _e(e,n){if(!n.value)return!0;var t=e.toLowerCase(),r=n.value.toLowerCase().split(",").map(function(l){return l.trim()}),u=r.reduce(function(l,o){if(!o.startsWith("!"))l.include.push(o);else{var c=o.substring(1);c.length&&l.notInclude.push(c)}return l},{include:[],notInclude:[]}),a=u.include,i=u.notInclude;return a.every(function(l){return t.includes(l)})&&i.every(function(l){return!t.includes(l)})}function Pe(e,n){return n.value&&e<n.value}function hn(e,n){return n.value&&e>n.value}function B(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=w(e,t),a=ye(n.updateValueFromEvent,r,n.value);return u.append(a),u}function g(e,n,t,r,u){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=w(e,a),o=be(n.updateValueFromEvent,i,n.value,t,r,u);return l.append(o),l}function x(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=w(e,t),a=Se(n.updateValueFromEvent,r,n.value);return u.append(a),u}function Te(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return B("\u0421\u043E\u0434\u0435\u0440\u0436\u0438\u0442: ",e,n,t)}function yn(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return B("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",e,n,t)}function Fe(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.1;return g("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",e,r,3,5,n,t)}function bn(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return U("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",e,n,t)}function Sn(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return U("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",e,n,t)}function U(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return g(e,n,"1","1","999999",t,r)}function Cn(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return H("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",e,n,t)}function Oe(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return H("\u0421\u043A\u0438\u0434\u043A\u0430: ",e,n,t)}function H(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return g(e,n,"5","0","100",t,r)}function En(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return g("\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u043E \u0433\u043E\u043B\u043E\u0441\u043E\u0432: ",e,"50","0","10000",n,t)}function wn(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return g("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",e,"5","0","100",n,t)}function q(e,n,t,r,u){return g(e,n,u,"0","1000000",t,r)}function In(e,n,t){return g("\u041A\u0443\u043F\u043E\u043D: ",e,"500","0","100000",n,t)}function xn(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"250";return q("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",e,n,t,r)}function An(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return q("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",e,n,t,"250")}function Re(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return x("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",e,n,t)}function Ne(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return x("\u0412\u043A\u043B: ",e,n,t)}function _n(e,n){e.parentNode.insertBefore(n,e.nextSibling)}function Le(e){z(e),G(e,"none")}function De(e,n){n=n||W(e),G(e,n)}function Pn(e,n,t){n?Le(e):(t=t||W(e),De(e,t))}function G(e,n){e.style.display=n}function W(e){return z(e),e.getAttribute("display")}function z(e){if(!e.hasAttribute("display")){var n=getComputedStyle(e),t=n.display;e.setAttribute("display",t)}}function ke(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.2;n?je(e,t):K(e)}function K(e){e.style.opacity=""}function je(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.2;e.style.opacity=n}function Me(e){e.style.order=""}function Q(e,n){e.style.order=n}function Tn(e,n){e.style.background=n}function Fn(e){var n=document.createElement("style");n.type="text/css",n.textContent=e,document.head.appendChild(n)}var b=Ie(2),$=new f("".concat(b,"-name-filter"),null),J=new f("".concat(b,"-min-rating-filter"),4.1),d=new f("discount-amount",25),Y=new f("".concat(b,"-no-rating-filter"),!1),X=new f("".concat(b,"-filter-enabled"),!0),Z=new f("sort-enabled",!0),Ve=".catalog-list",Be=".lu-grid__item",Ue=".rating-number",ee="priceRounded";setInterval(He,100);function He(){var e=s(Ve);e?(Ee(e,We),ze()):V("order")?Ge():V("basket")&&qe()}function qe(){var e=C("lu-cart-product-card");e.forEach(function(n){var t=s(".product-card-favorite-btn",n),r=t.getAttribute("id"),u=ve(r),a=ne(u),i=s(".lu-product-card-name",n);i.href=a})}function ne(e){return"https://ekb.online.lenta.com/item/".concat(e)}function Ge(){var e=s("lu-profile-order-page");if(e){var n=C("lu-profile-order-item",e);n.forEach(function(t){var r=t.parentNode;r.onclick=function(){return r.remove()}})}}function We(e,n){e.style="display: flex;grid-gap: 15px;margin-left: 10px;";var t="display: flex;align-items: center;",r="margin-left: 5px;border: 1px solid #C9C9C9;border-radius: 8px;height: 40px;padding: 0 16px;",u=r+"width: 170px;",a=r,i="margin-left: 5px;border: 1px solid #C9C9C9;border-radius: 4px;width: 22px;height: 22px;",l=Te($,t,u),o=Fe(J,t,a),c=Oe(d,t,a),v=Re(Y,t,i),A=Ne(X,t,i),tn=x("\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0430:",Z,t,i);e.append(l,o,c,v,A,tn),n.prepend(e)}function ze(){var e=s("lu-pagination");e&&Q(e,99999);var n=C(Be);n.forEach(function(t){var r=Ke(t);$e(t);var u=s(".main-price",t,!0);if(u){var a=Je(t,u),i,l=!1;if(d.value!==null&&(l=Xe(t,u,a),i=t.getAttribute("discounted-price")),nn(u,a,i,l),Z.value){var o=i||a;Q(t,o)}else Me(t);if(!X.value){K(t);return}var c=s(Ue,t),v=c?Pe(h(c),J):!Y.value,A=Ae(r,$)||v;ke(t,A)}})}function Ke(e){var n=s(".lu-product-card-name-wrapper",e);return n?(Qe(n),n.innerText):""}function Qe(e){var n="72px";e.style.height=n,e.firstChild.style.height=n}function $e(e){var n=s(".lu-product-card-image-link",e);if(n){var t=s(".lu-product-card-image",n);if(t){var r=I(t.src,7,""),u=s(".lu-product-card-name",e),a=ne(r);n.href=a,u.href=a}}}function Je(e,n){return e.hasAttribute("price")||Ye(e,n),e.getAttribute("price")}function Ye(e,n){var t=h(n,!0,!0);e.setAttribute("price",t.toFixed())}function Xe(e,n,t){if(n.classList.contains("__accent"))return!1;if(e.hasAttribute("discount")){var r=+e.getAttribute("discount");if(r===d.value)return!1}return d.value===0?(e.removeAttribute("discount"),e.removeAttribute("discounted-price")):(Ze(e),en(e,t)),!0}function Ze(e){e.setAttribute("discount",d.value)}function en(e,n){var t=(n*((100-d.value)/100)).toFixed();e.setAttribute("discounted-price",t)}function nn(e,n,t,r){if(!(!r&&e.classList.contains(ee))){var u=t?"".concat(n," (").concat(t,") \u20BD"):"".concat(n," \u20BD");e.innerText=u,e.classList.add(ee)}}})();})();
